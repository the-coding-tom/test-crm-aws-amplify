(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{322:function(t,e,r){"use strict";var n={props:{title:{type:String,default:""},subtitle:{type:String,default:""},info:{type:String,default:""}}},o=r(11),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h1",{staticClass:"page-title"},[r("span",[t._v(t._s(t.title))]),t._v(" "),r("b",{directives:[{name:"show",rawName:"v-show",value:t.subtitle,expression:"subtitle"}]},[t._v("•")]),t._v(" "+t._s(t.subtitle))])}),[],!1,null,null,null);e.a=component.exports},323:function(t,e,r){"use strict";var n={props:{title:{type:String,default:null},subtitle:{type:String,default:null}}},o=r(11),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h3",{staticClass:"page-title"},[r("span",[t._v(t._s(t.title))]),t._v(" "),r("b",{directives:[{name:"show",rawName:"v-show",value:t.subtitle,expression:"subtitle"}]},[t._v("•")]),t._v(" "+t._s(t.subtitle))])}),[],!1,null,null,null);e.a=component.exports},331:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return n}));var n=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e.response)return o(e.response.data.message,r),void(e.response.data.errors&&t.each(e.response.data.errors,(function(e,i){return t.each(e,(function(t,e){return o(t,r)}))})));o(e.message,r)},o=function(t,e){console.log("------------------------------------"),console.log(t),console.log("------------------------------------"),e&&e.$bvToast.toast(t,{title:"Error",variant:"danger"})}}).call(this,r(206))},398:function(t,r,n){"use strict";(function(t){n(9),n(3),n(7),n(6),n(5),n(8),n(40);var o,l=n(12),c=n(1),d=(n(325),n(116),n(326)),m=n.n(d),f=(n(17),n(327),n(328)),v=n.n(f),h=n(322),_=n(323),y=n(44),x=n(331);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}r.a={name:"DirectoryEdit",layout:"ShackDash",components:(o={MainTitle:h.a,SectionTitle:_.a},Object(c.a)(o,v.a.name,v.a),Object(c.a)(o,m.a.name,m.a),o),asyncData:function(t){return Object(l.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.store,r=t.params,n=t.$membership,o=t.error,t.$moment,e.prev=1,c=null,d=[],e.next=6,n.getAMembership(r.id).then(function(){var t=Object(l.a)(regeneratorRuntime.mark((function t(e){var data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((data=e.data).trial_days=data.primary_plan[0].pivot.trial_days,!data.paid_by){t.next=8;break}return t.next=5,n.getAMembership(data.paid_by);case 5:r=t.sent,d.push(r.data),c=data.paid_by;case 8:return t.abrupt("return",{data:data,members:d,paid_by:c});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(1),o({statusCode:e.t0.statusCode,message:e.t0.response?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},data:function(){return{loading:!1,selectedAdmin:null,admins:[],options:[{text:"Referral",value:"referral"},{text:"Application",value:"application"},{text:"Past Events",value:"past_events"},{text:"Invite Card",value:"invite_card"}],paid_by:null,prefix_type:[{text:"Founding Member",value:"0"},{text:"Fast Track",value:"1"},{text:"Early Invite",value:"2"},{text:"General Member",value:"3"}],prefix_locality:[{text:"Bay Area",value:"A"},{text:"US outside of the Bay",value:"B"},{text:"EMEA",value:"C"},{text:"APAC",value:"D"}],searching:!1,cards:[]}},computed:k(k({},Object(y.b)({space:function(t){return t.space.currentSpace}})),{},{assignedAdmin:function(){if(this.data.assigned_admin)return"Current: ".concat(this.data.assigned_admin.name)}}),methods:{updateMembership:function(){var t=this,e=this.$route.params.id;this.loading=!this.loading,this.data.membership_id=this.data.membership_number,this.data.user_profile&&(this.data.user_profile.first_name=this.data.first_name,this.data.user_profile.last_name=this.data.last_name,this.data.user_profile.full_name="".concat(this.data.first_name," ").concat(this.data.last_name)),this.data.paid_by=this.paid_by,this.data.trial_days="0",this.data.assigned_admin,this.data.assigned_admin=this.selectedAdmin||this.data.assigned_admin.uuid,console.log(this.data.assignedAdmin),this.$membership.updateMembership(e,this.data).then((function(t){})).catch((function(e){t.loading=!t.loading;var r=e.response?"".concat(e.response.data.message," ~ ").concat(JSON.stringify(e.response.data.errors)):e.message;t.$bvToast.toast(r,{title:"Error",variant:"danger"})})),this.$membership.updateProfile(k({user_id:this.data.user_id},this.data.user_profile)).then((function(e){t.loading=!t.loading,t.$bvToast.toast("Membership updated succesfully",{title:"Success",variant:"success"}),t.$router.go(-1)})).catch((function(e){t.loading=!t.loading;var r=e.response?"".concat(e.response.data.message," ~ ").concat(JSON.stringify(e.response.data.errors)):e.message;t.$bvToast.toast(r,{title:"Error",variant:"danger"})}))},searchMembers:function(e){var link="filter[search]=".concat(e,"&filter[status]=accepted");this.searching=!this.searching;var r=this;t.debounce((function(){r.$membership.getAllMemberships(link).then((function(t){var data=t.data;r.searching=!r.searching,r.members=data}))}),350)()},searchAdmins:function(t){var r=this,link="/".concat(this.space.subdomain,"/admins?filter[name]=").concat(t);this.$admin.getAllAdmins(link).then((function(t){r.admins=t.data})).catch((function(t){var r=e.response?"".concat(e.response.data.message," ~ ").concat(JSON.stringify(e.response.data.errors)):e.message;error({statusCode:err.status||404,message:r})}))},getCards:function(e){var r=this;this.$membership.getPaymentMethods(e).then((function(e){t.each(e.data,(function(t){r.cards.push({text:"".concat(t.card_brand," - **** ").concat(t.last_4),value:t.id})}))})).catch((function(t){var e=t.response?"".concat(t.response.data.message," ~ ").concat(JSON.stringify(t.response.data.errors)):t.message;r.$bvToast.toast(e,{variant:"danger",title:"Error"})}))},cancelMembership:function(){var t=this;if(confirm("Are you sure?")){this.loading=!this.loading;var e=this.$route.params.id;this.$membership.deleteMembership(e).then((function(e){e.data;t.$bvToast.toast("Member deleted successfully",{title:"Success",variant:"success"}),t.$router.go(-1)})).catch((function(e){t.loading=!t.loading;var r=e.response?"".concat(e.response.data.message," ~ ").concat(JSON.stringify(e.response.data.errors)):e.message;t.$bvToast.toast(r,{title:"Error",variant:"danger"})}))}},onboardBrivo:function(){var t=this;this.loading=!this.loading;var e=this.$route.params.id;this.$membership.onboardBrivo(e).then((function(e){t.loading=!t.loading,t.$bvToast.toast("Brivo onboarding successfully",{title:"Success",variant:"success"})})).catch((function(e){Object(x.a)(e,t)}))},copyToClipBoard:function(){var t=document.querySelector("#testing-code");t.setAttribute("type","text"),t.select();try{document.execCommand("copy")&&this.$bvToast.toast("Invitation link copied",{title:"Copied",variant:"success"})}catch(t){alert("Oops, unable to copy")}t.setAttribute("type","hidden"),window.getSelection().removeAllRanges()}}}}).call(this,n(206))},567:function(t,e,r){"use strict";r.r(e);var n=r(398).a,o=r(11),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.updateMembership(e)}}},[r("base-header",{staticClass:"pb-6",attrs:{type:""}},[r("div",{staticClass:"d-flex justify-content-between align-items-center py-4"},[r("MainTitle",{attrs:{subtitle:t.data.first_name+" "+t.data.last_name,title:"Membership"}}),t._v(" "),r("div",[r("input",{attrs:{id:"testing-code",type:"hidden"},domProps:{value:"https://member.shack15.com/?invitation="+t.data.invitation_code}}),t._v(" "),r("b-button",{staticClass:"text-primary",attrs:{variant:"transparent"},on:{click:t.copyToClipBoard}},[r("i",{staticClass:"fas fa-copy"}),t._v(" Copy Invitation Link\n          ")]),t._v(" "),r("b-button",{staticClass:"text-primary",attrs:{variant:"transparent"},on:{click:t.onboardBrivo}},[r("i",{staticClass:"fas fa-user-lock"}),t._v(" Brivo Onboard\n          ")]),t._v(" "),r("b-button",{staticClass:"text-danger",attrs:{variant:"transparent"},on:{click:t.cancelMembership}},[r("i",{staticClass:"fa fa-trash"}),t._v(" Cancel Membership")])],1)],1)]),t._v(" "),r("div",{staticClass:"container-fluid mt--6"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("card",[r("div",{staticClass:"row"},[r("base-input",{staticClass:"col-md-6",attrs:{id:"email",type:"text",label:"Email",placeholder:"Email"},model:{value:t.data.email,callback:function(e){t.$set(t.data,"email",e)},expression:"data.email"}}),t._v(" "),r("base-input",{staticClass:"col-md-6",attrs:{id:"firstName",type:"text",label:"First Name",placeholder:"First Name"},model:{value:t.data.first_name,callback:function(e){t.$set(t.data,"first_name",e)},expression:"data.first_name"}}),t._v(" "),r("base-input",{staticClass:"col-md-6",attrs:{id:"lastName",label:"Last Name",placeholder:"Last Name",type:"text"},model:{value:t.data.last_name,callback:function(e){t.$set(t.data,"last_name",e)},expression:"data.last_name"}}),t._v(" "),r("base-input",{staticClass:"col-md-6",attrs:{id:"membershipNumber",label:"Membership #",placeholder:"0000000"},model:{value:t.data.membership_number,callback:function(e){t.$set(t.data,"membership_number",e)},expression:"data.membership_number"}}),t._v(" "),r("base-input",{staticClass:"col-md-6",attrs:{id:"linkedinURL",required:!1,label:"Linkedin",placeholder:"https://linkedin.com/in/someone"},model:{value:t.data.linkedin_url,callback:function(e){t.$set(t.data,"linkedin_url",e)},expression:"data.linkedin_url"}}),t._v(" "),r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Source of Invitation"}},[r("b-form-select",{attrs:{id:"invitationSource",options:t.options},model:{value:t.data.extras[0].type,callback:function(e){t.$set(t.data.extras[0],"type",e)},expression:"data.extras[0].type"}})],1),t._v(" "),r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Comments"}},[r("b-form-textarea",{attrs:{id:"comment",label:"Comments",placeholder:"Comments"},model:{value:t.data.extras[0].comment,callback:function(e){t.$set(t.data.extras[0],"comment",e)},expression:"data.extras[0].comment"}})],1),t._v(" "),r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Membership Type"}},[r("b-form-select",{attrs:{id:"memberType",options:t.prefix_type},model:{value:t.data.prefix_type,callback:function(e){t.$set(t.data,"prefix_type",e)},expression:"data.prefix_type"}})],1),t._v(" "),r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Region"}},[r("b-form-select",{attrs:{id:"region",options:t.prefix_locality},model:{value:t.data.prefix_locality,callback:function(e){t.$set(t.data,"prefix_locality",e)},expression:"data.prefix_locality"}})],1),t._v(" "),r("b-form-group",{staticClass:"col-md-6",attrs:{description:t.assignedAdmin,label:"Assigned Admin"}},[r("el-select",{attrs:{"remote-method":t.searchAdmins,loading:t.searching,filterable:"",remote:"","reserve-keyword":"",placeholder:"Choose an admin"},model:{value:t.selectedAdmin,callback:function(e){t.selectedAdmin=e},expression:"selectedAdmin"}},t._l(t.admins,(function(option){return r("el-option",{key:option.id,attrs:{label:option.name,value:option.id}})})),1)],1),t._v(" "),r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Date Joined"}},[r("client-only",[r("date-picker",{attrs:{id:"time",width:"100%","input-class":"form-control",lang:"en",format:"YYYY-MM-DD","value-type":"format",confirm:"",type:"date",placeholder:"Start Date"},model:{value:t.data.trial_ends_at,callback:function(e){t.$set(t.data,"trial_ends_at",e)},expression:"data.trial_ends_at"}})],1)],1),t._v(" "),t.data.subscriptions&&t.data.subscriptions.length>0?r("div",{staticStyle:{width:"100%",display:"flex"}},[r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Subscription Start Date"}},[r("client-only",[r("date-picker",{attrs:{id:"time",width:"100%","input-class":"form-control",lang:"en",format:"YYYY-MM-DD","value-type":"format",confirm:"",type:"date",placeholder:"Start Date"},model:{value:t.data.subscriptions[0].starts_at,callback:function(e){t.$set(t.data.subscriptions[0],"starts_at",e)},expression:"data.subscriptions[0].starts_at"}})],1)],1),t._v(" "),r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Subscription Expiry Date"}},[r("client-only",[r("date-picker",{attrs:{id:"time",width:"100%","input-class":"form-control",lang:"en",format:"YYYY-MM-DD","value-type":"format",confirm:"",type:"date",placeholder:"Start Date"},model:{value:t.data.subscriptions[0].ends_at,callback:function(e){t.$set(t.data.subscriptions[0],"ends_at",e)},expression:"data.subscriptions[0].ends_at"}})],1)],1)],1):t._e(),t._v(" "),r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Paid for"}},[r("b-form-checkbox",{attrs:{value:!0,"unchecked-value":!1},model:{value:t.data.paid_for,callback:function(e){t.$set(t.data,"paid_for",e)},expression:"data.paid_for"}},[t._v("Yes")])],1),t._v(" "),t.data.paid_for?r("b-form-group",{staticClass:"col-md-6",attrs:{label:"Paid by"}},[r("el-select",{attrs:{"remote-method":t.searchMembers,loading:t.searching,filterable:"",remote:"","reserve-keyword":"",placeholder:"Choose a member"},on:{change:t.getCards},model:{value:t.paid_by,callback:function(e){t.paid_by=e},expression:"paid_by"}},t._l(t.members,(function(option){return r("el-option",{key:option.id,attrs:{label:option.first_name+" "+option.last_name,value:option.id}})})),1)],1):t._e(),t._v(" "),r("div",{staticClass:"col-md-12"},[r("b-button",{attrs:{disabled:t.loading,type:"submit",variant:"primary",block:""}},[t._v("Save")])],1)],1)])],1)])])],1),t._v(" "),r("b-button",{staticClass:"text-primary ml-2 mb-2",attrs:{variant:"transparent"},on:{click:function(e){return t.$router.go(-1)}}},[r("i",{staticClass:"fas fa-chevron-left"}),t._v(" Back")])],1)}),[],!1,null,null,null);e.default=component.exports}}]);