(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{320:function(e,o,t){"use strict";var n={props:{title:{type:String,default:""},subtitle:{type:String,default:""},info:{type:String,default:""}}},r=t(11),component=Object(r.a)(n,(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("h1",{staticClass:"page-title"},[t("span",[e._v(e._s(e.title))]),e._v(" "),t("b",{directives:[{name:"show",rawName:"v-show",value:e.subtitle,expression:"subtitle"}]},[e._v("â€¢")]),e._v(" "+e._s(e.subtitle))])}),[],!1,null,null,null);o.a=component.exports},544:function(e,o,t){"use strict";t.r(o);t(9),t(3),t(7),t(6),t(5),t(8),t(55),t(60),t(40);var n,r=t(12),l=t(0),c=(t(323),t(115),t(324)),d=t.n(c),m=(t(17),t(325),t(326)),v=t.n(m),f=t(116),_=t(320),k=t(42);function h(object,e){var o=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),o.push.apply(o,t)}return o}var y={layout:"ShackDash",components:(n={BaseHeader:f.a,MainTitle:_.a},Object(l.a)(n,v.a.name,v.a),Object(l.a)(n,d.a.name,d.a),n),asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function o(){var t,n,r,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.store,t=e.$promotion,n=e.params,r=e.error,l=n.id,o.next=4,t.getPromotion(l).then((function(e){var data=e.data;return console.log("------------------------------------"),console.log(data),console.log("------------------------------------"),data.allowed_usage_areas=JSON.parse(data.allowed_usage_areas),{promotion:data,id:l,bookingRooms:data.allowed_usage_areas.includes("room_booking"),orderingFoodAndDrinks:data.allowed_usage_areas.includes("food_ordering"),bookingEvents:data.allowed_usage_areas.includes("event_booking")}})).catch((function(e){r({statusCode:e.statusCode,message:e.response?JSON.stringify(e.response.data.message):e.message})}));case 4:return o.abrupt("return",o.sent);case 5:case"end":return o.stop()}}),o)})))()},data:function(){return{loading:!1,promotion:{name:"",expires_on:"",type:"",amount:0,allowed_usage_areas:[],state:"active"},bookingRooms:!1,orderingFoodAndDrinks:!1,bookingEvents:!1,promotionTypes:[{name:"Free Credit",value:"credit",key:"#1"}]}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(o){Object(l.a)(e,o,source[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(source,o))}))}return e}({},Object(k.b)({space:function(e){return e.space.currentSpace}})),methods:{editPlan:function(){var e=this,o=this.id;this.space,this.promotion;this.promotion.allowed_usage_areas=JSON.stringify(this.promotion.allowed_usage_areas),this.loading=!this.loading,this.$promotion.updatePromotion(o,this.promotion).then((function(o){o.data.data;e.$bvToast.toast("Promotion ~".concat(e.promotion.name,"~ updated successfully"),{title:"Success",variant:"success",solid:!0}),e.loading=!e.loading,e.$router.push({name:"space-promotions"})})).catch((function(o){var t=o.response?JSON.stringify(o.response.data.errors):o.message;e.$bvToast.toast(t,{title:"Error",variant:"danger",solid:!0}),e.loading=!e.loading}))},bookingRoomsSelected:function(e){if(e)this.promotion.allowed_usage_areas.push("room_booking");else{var o=this.promotion.allowed_usage_areas.indexOf("room_booking");this.promotion.allowed_usage_areas.splice(o,1)}},orderingFoodAndDrinksSelected:function(e){if(e)this.promotion.allowed_usage_areas.push("food_and_drinks_ordering");else{var o=this.promotion.allowed_usage_areas.indexOf("food_and_drinks_ordering");this.promotion.allowed_usage_areas.splice(o,1)}},bookingEventsSelected:function(e){if(e)this.promotion.allowed_usage_areas.push("event_booking");else{var o=this.promotion.allowed_usage_areas.indexOf("event_booking");this.promotion.allowed_usage_areas.splice(o,1)}}}},w=t(11),component=Object(w.a)(y,(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("b-form",{on:{submit:function(o){return o.preventDefault(),e.editPlan(o)}}},[t("base-header",{staticClass:"pb-6",attrs:{type:""}},[t("div",{staticClass:"d-flex justify-content-between align-items-center py-4"},[t("MainTitle",{attrs:{title:"Update Promotion"}}),e._v(" "),t("b-button",{staticClass:"btn btn-primary text-white",attrs:{disabled:e.loading,type:"submit"}},[e._v("Update Promotion")])],1)]),e._v(" "),t("div",{staticClass:"container-fluid mt--6"},[t("div",{staticClass:"card-deck flex-column flex-xl-row"},[t("card",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"row pd-r-20"},[t("base-input",{staticClass:"col-md-12",attrs:{id:"name",label:"Name of Promotion",placeholder:"Entrepreneur",required:""},model:{value:e.promotion.name,callback:function(o){e.$set(e.promotion,"name",o)},expression:"promotion.name"}}),e._v(" "),t("b-form-group",{staticClass:"col-md-12",attrs:{label:"Promotion Is Allowed In:"}},[t("b-row",[t("b-col",{attrs:{md:"10"}},[t("b-form-checkbox",{attrs:{id:"bookingRooms",value:!0,"unchecked-value":!1,name:"bookingRooms"},on:{change:e.bookingRoomsSelected},model:{value:e.bookingRooms,callback:function(o){e.bookingRooms=o},expression:"bookingRooms"}},[e._v("Booking Rooms")])],1),e._v(" "),t("b-col",{attrs:{md:"10"}},[t("b-form-checkbox",{attrs:{id:"orderFoodAndDrinks",value:!0,"unchecked-value":!1,name:"orderFoodAndDrinks"},on:{change:e.orderingFoodAndDrinksSelected},model:{value:e.orderingFoodAndDrinks,callback:function(o){e.orderingFoodAndDrinks=o},expression:"orderingFoodAndDrinks"}},[e._v("Ordering Food & Drinks")])],1),e._v(" "),t("b-col",{attrs:{md:"10"}},[t("b-form-checkbox",{attrs:{id:"bookingEvents",value:!0,"unchecked-value":!1,name:"bookingEvents"},on:{change:e.bookingEventsSelected},model:{value:e.bookingEvents,callback:function(o){e.bookingEvents=o},expression:"bookingEvents"}},[e._v("Booking Events")])],1)],1)],1),e._v(" "),t("b-form-group",{staticClass:"col-md-12",attrs:{label:"Promotion Type:",description:"Only one type of a promotion can exist at any given point in time. eg: there can't be two credit type promotions existing at the same time"}},[t("el-select",{attrs:{placeholder:"Select Promotion Type"},model:{value:e.promotion.type,callback:function(o){e.$set(e.promotion,"type",o)},expression:"promotion.type"}},e._l(e.promotionTypes,(function(e){return t("el-option",{key:e.key,attrs:{label:e.name,value:e.value}})})),1)],1),e._v(" "),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Promotion Amount (USD)",description:"An amount to give for this promotion"}},[t("b-form-input",{attrs:{id:"price_per_cycle",type:"number",placeholder:"0.00",required:""},model:{value:e.promotion.amount,callback:function(o){e.$set(e.promotion,"amount",o)},expression:"promotion.amount"}})],1),e._v(" "),t("b-form-group",{staticClass:"col-md-6",attrs:{label:"Expires on",description:"when this promotion expires"}},[t("client-only",[t("date-picker",{attrs:{id:"time",width:"100%","input-class":"form-control",lang:"en",format:"YYYY-MM-DD","value-type":"format",confirm:"",type:"date",placeholder:"Expire Date"},model:{value:e.promotion.expires_on,callback:function(o){e.$set(e.promotion,"expires_on",o)},expression:"promotion.expires_on"}})],1)],1)],1)]),e._v(" "),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"row pd-l-20"},[t("b-row",[t("div",{staticClass:"form-group col-md-12"},[t("label",{staticClass:"form-control-label",attrs:{for:"planvisibility"}},[e._v("Active")]),e._v(" "),t("b-row",[t("b-col",{attrs:{md:"10"}},[t("b-form-checkbox",{attrs:{id:"planVisibility",value:"active","unchecked-value":"inactive",name:"planVisibility"},model:{value:e.promotion.state,callback:function(o){e.$set(e.promotion,"state",o)},expression:"promotion.state"}},[e._v("Yes")]),e._v(" "),t("p",{staticClass:"text-left mt-2"},[e._v("\n                          Toggle on and off to activate or deactivate the\n                          promotion.\n                        ")])],1)],1)],1)])],1)])])])],1),e._v(" "),t("b-button",{staticClass:"text-primary mb-2",attrs:{variant:"transparent"},on:{click:function(o){return e.$router.go(-1)}}},[t("i",{staticClass:"ti-angle-left"}),e._v(" Back")])],1)],1)],1)}),[],!1,null,null,null);o.default=component.exports}}]);