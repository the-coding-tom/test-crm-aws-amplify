(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{322:function(t,e,n){"use strict";var r={props:{title:{type:String,default:""},subtitle:{type:String,default:""},info:{type:String,default:""}}},l=n(11),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"page-title"},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("b",{directives:[{name:"show",rawName:"v-show",value:t.subtitle,expression:"subtitle"}]},[t._v("•")]),t._v(" "+t._s(t.subtitle))])}),[],!1,null,null,null);e.a=component.exports},323:function(t,e,n){"use strict";var r={props:{title:{type:String,default:null},subtitle:{type:String,default:null}}},l=n(11),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{staticClass:"page-title"},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("b",{directives:[{name:"show",rawName:"v-show",value:t.subtitle,expression:"subtitle"}]},[t._v("•")]),t._v(" "+t._s(t.subtitle))])}),[],!1,null,null,null);e.a=component.exports},324:function(t,e,n){},329:function(t,e,n){"use strict";var r=n(324);n.n(r).a},330:function(t,e,n){"use strict";n(40);var r=n(12),l=n(67),c=n.n(l),o={props:{name:{type:String,default:null},label:{type:String,default:null},service:{type:String,default:"images"},url:{type:String,default:null}},data:function(){return{publicUrl:null}},methods:{onFileChange:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.target.files[0]){n.next=3;break}return n.abrupt("return");case 3:if(!(r.size>5e5)){n.next=6;break}return e.$bvToast.toast("File size must not be greater than 500kb",{variant:"warning"}),n.abrupt("return");case 6:return l=r.type,e.url=URL.createObjectURL(r),n.next=10,e.getSignedUrl(l);case 10:return c=n.sent,e.publicUrl=c.public_url,e.$bvToast.toast("Uploading image. Please wait..."),n.next=15,e.uploadUrl(c.signed_url,r,l).then((function(t){e.$emit("input",e.publicUrl),e.$bvToast.toast("Image uploaded successfully",{variant:"success",solid:!0})})).catch((function(t){e.$bvToast.toast(t.message,{title:"Error",variant:"danger",solid:!0})}));case 15:n.sent;case 16:case"end":return n.stop()}}),n)})))()},getSignedUrl:function(t){var e=this,n=this.service;return this.$images.getSignedUrl(n,t).then((function(t){return t.data.data})).catch((function(t){var n=t.response;e.$bvToast.toast(JSON.stringify(n.data.errors),{title:"Error",variant:"danger",solid:!0})}))},uploadUrl:function(t,e,n){var r=this;return c.a.put(t,e,{headers:{"Content-Type":n}}).then((function(t){return t})).catch((function(t){var e=t.response;r.$bvToast.toast(JSON.stringify(e.data),{variant:"danger",solid:!0})}))}}},d=(n(329),n(11)),component=Object(d.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"mr-b-20",attrs:{id:"preview"}},[t.url?n("img",{attrs:{src:t.url}}):t._e()]),t._v(" "),n("div",{staticClass:"bg-lgray pd-10 pd-l-20 upload-btn-wrapper pd-0"},[n("button",{staticClass:"btn"},[n("i",{staticClass:"fa fa-paperclip mr-r-10"}),t._v(" "+t._s(t.label))]),t._v(" "),n("input",{attrs:{name:t.name,type:"file",accept:"image/*"},on:{change:t.onFileChange}})])])}),[],!1,null,null,null);e.a=component.exports},525:function(t,e,n){"use strict";n.r(e);n(40);var r,l=n(12),c=n(1),o=(n(325),n(116),n(326)),d=n.n(o),v=(n(17),n(327),n(328)),f=n.n(v),m=n(322),h=n(323),_=(n(330),{name:"SendMessages",layout:"ShackDash",components:(r={MainTitle:m.a,SectionTitle:h.a},Object(c.a)(r,f.a.name,f.a),Object(c.a)(r,d.a.name,d.a),r),asyncData:function(t){return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.store,n=t.$email,t.params,e.next=3,n.getAllEmails().then((function(t){return{data:t.data,meta:t.meta,links:t.links}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},data:function(){return{fields:[{key:"emails",sortable:!1},{key:"subject",sortable:!0},{key:"created_at",sortable:!0}]}},methods:{getEmail:function(t){var e=JSON.parse(t);return"".concat(e[0]," +").concat(e.length-1)},rowClicked:function(t){this.$router.push({name:"space-memberships-messages-id",params:{id:t.id}})},next:function(){var t=this.links.next;this.$email.getAllEmails(t)},prev:function(){var t=this.links.prev;this.$$email.getAllEmails(t)},submit:function(){this.$router.push("/ui/members/messagesent")}}}),w=n(11),component=Object(w.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("base-header",{staticClass:"pb-6",attrs:{type:""}},[n("div",{staticClass:"d-flex justify-content-between align-items-center py-4"},[n("MainTitle",{attrs:{title:"Messages",subtitle:"All"}}),t._v(" "),n("b-button",{attrs:{to:{name:"space-memberships-messages-create"},variant:"primary"}},[n("i",{staticClass:"fa fa-paper-plane"}),t._v(" New Email")])],1)]),t._v(" "),n("div",{staticClass:"container-fluid mt--6 mr-b-30"},[n("div",{staticClass:"card-deck flex-column flex-xl-row"},[n("div",{staticClass:"card"},[n("b-table",{attrs:{fields:t.fields,items:t.data,striped:"",hover:"","show-empty":""},on:{"row-clicked":t.rowClicked},scopedSlots:t._u([{key:"cell(emails)",fn:function(e){return[t._v("\n            "+t._s(t.getEmail(e.value))+"\n          ")]}}])})],1)]),t._v(" "),n("div",[n("base-pagination",{attrs:{total:t.meta.total,"per-page":t.meta.per_page,value:t.meta.current_page,align:"center"},on:{next:t.next,prev:t.prev}})],1),t._v(" "),n("b-link",{on:{click:function(e){return t.$router.go(-1)}}},[n("i",{staticClass:"fa fa-angle-left mr-r-10"}),t._v(" Back")])],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);