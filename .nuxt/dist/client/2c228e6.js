(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{322:function(e,t,n){"use strict";var r={props:{title:{type:String,default:""},subtitle:{type:String,default:""},info:{type:String,default:""}}},o=n(11),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticClass:"page-title"},[n("span",[e._v(e._s(e.title))]),e._v(" "),n("b",{directives:[{name:"show",rawName:"v-show",value:e.subtitle,expression:"subtitle"}]},[e._v("•")]),e._v(" "+e._s(e.subtitle))])}),[],!1,null,null,null);t.a=component.exports},323:function(e,t,n){"use strict";var r={props:{title:{type:String,default:null},subtitle:{type:String,default:null}}},o=n(11),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h3",{staticClass:"page-title"},[n("span",[e._v(e._s(e.title))]),e._v(" "),n("b",{directives:[{name:"show",rawName:"v-show",value:e.subtitle,expression:"subtitle"}]},[e._v("•")]),e._v(" "+e._s(e.subtitle))])}),[],!1,null,null,null);t.a=component.exports},331:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var r=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t.response)return o(t.response.data.message,n),void(t.response.data.errors&&e.each(t.response.data.errors,(function(t,i){return e.each(t,(function(e,t){return o(e,n)}))})));o(t.message,n)},o=function(e,t){console.log("------------------------------------"),console.log(e),console.log("------------------------------------"),t&&t.$bvToast.toast(e,{title:"Error",variant:"danger"})}}).call(this,n(206))},332:function(e,t,n){"use strict";var r={props:{loading:{type:Boolean,default:!1},required:{type:Boolean,default:!0}},data:function(){return{searchTerm:""}},methods:{search:function(){this.$emit("input",this.searchTerm),this.$emit("search",this.searchTerm)}}},o=n(11),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{on:{submit:function(t){return t.preventDefault(),e.search(t)}}},[n("base-input",{staticClass:"mb-0",attrs:{"input-group-classes":"input-group-merge sh-search",group:""}},[n("template",{slot:"prepend"},[n("i",{staticClass:"fa fa-search"})]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],staticClass:"form-control",attrs:{required:e.required,type:"text",placeholder:"Looking for ...","aria-describedby":"button-addon2"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}}),e._v(" "),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-default",attrs:{id:"button-addon2",disabled:e.loading,type:"submit"}},[e.loading?n("i",{staticClass:"fa fa-spinner fa-spin"}):n("span",[e._v("\n            Search")])])])],2)],1)}),[],!1,null,null,null);t.a=component.exports},337:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(143);var r=function(e){return n(344).parse(e).search}},367:function(e,t,n){"use strict";(function(e){n(9),n(3),n(7),n(6),n(5),n(8),n(21),n(40);var r,o=n(12),c=n(1),l=(n(325),n(116),n(326)),d=n.n(l),m=(n(17),n(327),n(328)),h=n.n(m),f=n(119),v=n(487),_=n(322),y=n(323),k=n(332),O=(n(331),n(44)),$=n(337);function C(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}t.a={name:"Checkin",layout:"ShackDash",components:(r={MainTitle:_.a,SearchForm:k.a,SectionTitle:y.a,MembersCheckin:v.a,RouteBreadCrumb:f.a},Object(c.a)(r,h.a.name,h.a),Object(c.a)(r,d.a.name,d.a),Object(c.a)(r,"QrcodeStream",(function(){return Promise.all([n.e(7),n.e(6)]).then(n.bind(null,421))})),r),asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,c,l,link,d,m,h,f,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$membership,o=e.$checkin,c=e.error,l=e.route,t.prev=1,n(42),link="filter[status]=accepted&include=profile",d="?page=".concat(l.query.page,"&sort=-id"),(l.query.from_date||l.query.to_date)&&(d+="&filter[checkin_timestamp]=".concat(l.query.from_date,",").concat(l.query.to_date)),t.next=8,o.checkins(d).then((function(e){var data=e.data,meta=e.meta,t=e.links;return m=meta,h=t,data}));case 8:return f=t.sent,t.next=11,r.getAllMemberships(link).then((function(e){return{data:e.data,checkins:f,meta:m,links:h}}));case 11:return t.abrupt("return",t.sent);case 14:t.prev=14,t.t0=t.catch(1),v=t.t0.response?t.t0.response.data.message:t.t0.message,c({statusCode:t.t0.statusCode,message:v});case 18:case"end":return t.stop()}}),t,null,[[1,14]])})))()},data:function(){var e;return e={searching:!1,type:0,date:[],first_name:"",last_name:"",email:"",company:""},Object(c.a)(e,"email",""),Object(c.a)(e,"membership_id",""),Object(c.a)(e,"booking_id",""),Object(c.a)(e,"booking_info",""),Object(c.a)(e,"loading",!1),Object(c.a)(e,"scanComplete",!1),Object(c.a)(e,"meeting_guest",!1),Object(c.a)(e,"meta",{total:0}),Object(c.a)(e,"options",[{value:"Option1",label:"Option1"},{value:"Option2",label:"Option2"},{value:"Option3",label:"Option3"},{value:"Option4",label:"Option4"},{value:"Option5",label:"Option5"}]),Object(c.a)(e,"value",""),e},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(O.b)({bookings:function(e){return e.resources.bookingsForDate}})),mounted:function(){(this.$route.query.from_date||this.$route.query.to_date)&&(this.date=[this.$route.query.from_date,this.$route.query.to_date])},methods:{exportData:function(){var filter="";this.date[0]&&this.date[1]&&(filter="?filter[checkin_timestamp]=".concat(this.date[0],",").concat(this.date[1],"&sort=-id")),this.$checkin.exportCheckins(filter).then((function(e){console.log(e);var t=new Blob([e],{type:"text/csv"}),a=document.createElement("a"),n=URL.createObjectURL(t);document.body.appendChild(a),a.innerHTML="download me",a.href=n,a.download="directory-members.csv",a.click()}))},getCheckInData:function(){var e="?from_date=".concat(this.date[0],"&to_date=").concat(this.date[1]);this.$router.push(e),location.href=location.origin+this.$route.path+e},onDecode:function(data){data&&(this.scanComplete=!0,this.membership_id=data.split("//")[1],this.checkinMember("scan"))},next:function(){var e=this.links.next,t=Object($.a)(e);(this.$route.query.from_date||this.$route.query.to_date)&&(t+="&from_date=".concat(this.$route.query.from_date,"&to_date=").concat(this.$route.query.to_date)),console.log(t),this.$router.push(t),location.href=location.origin+this.$route.path+t},prev:function(){var e=this.links.prev,t=Object($.a)(e);(this.$route.query.from_date||this.$route.query.to_date)&&(t+="&from_date=".concat(this.$route.query.from_date,"&to_date=").concat(this.$route.query.to_date)),this.$router.push(t),location.href=location.origin+this.$route.path+t},changePage:function(e){var t="?page=".concat(e);(this.$route.query.from_date||this.$route.query.to_date)&&(t+="&from_date=".concat(this.$route.query.from_date,"&to_date=").concat(this.$route.query.to_date)),this.$router.push(t),location.href=location.origin+this.$route.path+t},searchMembers:function(t){var link="filter[search]=".concat(t,"&filter[status]=accepted");this.searching=!this.searching;var n=this;e.debounce((function(){n.$membership.getAllMemberships(link).then((function(e){var data=e.data;n.searching=!n.searching,n.data=data}))}),350)()},checkinGuest:function(){var e=this;this.loading=!this.loading,this.booking_id=this.booking_info.split(" ")[0],this.membership_id=this.membership_id?this.membership_id:this.booking_info.split(" ")[1];var t=this.first_name,n=this.last_name,r=this.email,o=this.company,c=this.membership_id,l=this.booking_id,d=this.meeting_guest;this.$checkin.checkin({type:"guest",first_name:t,last_name:n,email:r,company:o,membership_id:c,booking_id:l,meeting_guest:d}).then((function(t){t.data;e.loadiing=!e.loading,e.$bvToast.toast("Guest checked in successfully",{title:"Success",variant:"success"}),e.$bvModal.hide("checkin"),location.reload()})).catch((function(t){e.loading=!e.loading;var n=t.response?t.response.data.message:t.message;e.$bvToast.toast("Error - ".concat(n),{title:"Error",variant:"danger"})}))},checkinMember:function(){var e=this,source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"manual";this.loading=!this.loading;var t=this.membership_id;try{this.$checkin.checkin({type:"member",checkin_type:source,membership_id:t,membership:t}).then((function(t){t.data;e.loading=!1,e.$bvToast.toast("Member checked in successfully",{title:"Success",variant:"success"}),e.$bvModal.hide("scanqrcode"),e.$bvModal.hide("checkin"),location.reload()})).catch((function(t){e.$bvModal.hide("scanqrcode"),e.loading=!e.loading;var n=t.response?t.response.data.message:t.message;e.$bvToast.toast(n,{title:"Error",variant:"danger"})}))}catch(e){this.loading=!this.loading;var n=e.response?e.response.data.message:e.message;this.$bvModal.hide("scanqrcode"),this.$bvToast.toast(n,{title:"Error",variant:"danger"})}},togggleLoading:function(){this.loading=!this.loading},toggleModal:function(e){this.$bvModal.show(e),this.scanComplete=!1}}}}).call(this,n(206))},368:function(e,t,n){"use strict";(function(e){n(47),n(14);var r,o=n(1),c=(n(333),n(116),n(334)),l=n.n(c),d=(n(17),n(335),n(336)),m=n.n(d),h=n(331);t.a={components:(r={},Object(o.a)(r,m.a.name,m.a),Object(o.a)(r,l.a.name,l.a),r),props:{loading:{type:Boolean,default:!1},itemLimit:{type:Number,default:9},showModal:{type:Boolean,default:!1},checkins:{type:Array,default:function(){return[]}},toggleLoading:{type:Function,default:function(){}},status:{type:Object,default:function(){}}},data:function(){return{modals:{classic:!1,notice:!1,form:!1},prefix_type:[{text:"Founding Member",value:"0"}]}},computed:{checkedInMembers:function(){return this.checkins}},methods:{checkout:function(t){var n=this;this.toggleLoading(),this.$checkin.checkout(t.id).then((function(r){var data=r.data,o="guest"==t.type?"Guest checked out successfully":"Member checked out successfully",i=e.findIndex(n.checkins,t);n.checkins[i]=data,n.toggleLoading(),n.$bvToast.toast(o,{title:"Success",variant:"success"})})).catch((function(e){n.toggleLoading(),n.$bvToast.toast("Checkout failed. Try again",{title:"Error",variant:"danger"})}))},guestOf:function(data){return console.log("------------------------------------"),console.log(data),console.log("------------------------------------"),this.$membership.getAMembership(data.value).then((function(e){return e.data.first_name})).catch((function(e){Object(h.a)(e)}))}}}}).call(this,n(206))},487:function(e,t,n){"use strict";var r=n(368).a,o=n(11),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card"},[n("el-table",{staticClass:"table table-hover table-striped table-responsive",attrs:{data:e.checkedInMembers,"header-row-class-name":"thead-light"}},[n("el-table-column",{attrs:{label:"Name  /  Company",prop:"name",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("div",{staticClass:"sh-vflex"},[r.membership?n("div",[n("nuxt-link",{attrs:{to:{name:"space-directory-id",params:{id:r.membership}}}},[e._v("\n              "+e._s(r.first_name+"  "+r.last_name)),null!=r.member&&"0"===r.member.prefix_type?n("b-badge",{attrs:{pill:"",variant:"secondary"}},[n("i",{staticClass:"fa fa-star"})]):e._e()],1),e._v(" "),n("br"),e._v("\n            "+e._s(r.company)+"\n          ")],1):n("div",[e._v("\n            "+e._s(r.first_name+"  "+r.last_name)),n("br"),e._v("\n            "+e._s(r.company)+"\n          ")])])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Type",prop:"type",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("div",[e._v("\n          "+e._s(r.type)+"\n        ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"For",prop:"member_id",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["guest"==r.type?n("div",{staticClass:"float-left"},[e._v("\n          "+e._s(r.member?r.member.first_name+" "+r.member.last_name:"deleted member")+"\n        ")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Meeting Guest",prop:"meeting_guest",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.meeting_guest?n("b-badge",{attrs:{variant:"primary"}},[e._v("Yes")]):n("b-badge",{attrs:{variant:"primary"}},[e._v("No")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Timestamp: Check-in","min-width":"100px",prop:"method",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.checkin_timestamp))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Check-out Time",prop:"status",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.checkout_timestamp))])]}}])})],1)],1)}),[],!1,null,null,null);t.a=component.exports},557:function(e,t,n){"use strict";n.r(t);var r=n(367).a,o=n(11),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("base-header",{staticClass:"pb-6",attrs:{type:""}},[n("div",{staticClass:"d-flex justify-content-between align-items-center py-4"},[n("MainTitle",{attrs:{subtitle:e.meta.total+" records found",title:"Past Checkins"}}),e._v(" "),n("div",{staticStyle:{display:"flex","flex-direction":"row"}},[n("b-button",{staticClass:"text-primary",attrs:{variant:"transparent"},on:{click:e.exportData}},[n("i",{staticClass:"fa fa-file-export"}),e._v(" Export")]),e._v(" "),n("div",{staticStyle:{width:"200px"}},[n("no-ssr",[n("date-picker",{attrs:{id:"time",width:"100%","input-class":"form-control",lang:"en",format:"YYYY-MM-DD","value-type":"format",confirm:"",range:"",type:"date",placeholder:"Filter by date"},on:{change:e.getCheckInData},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1)],1)],1)]),e._v(" "),n("div",{staticClass:"container-fluid mt--6"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("MembersCheckin",{attrs:{checkins:e.checkins,loading:e.loading,"toggle-loading":e.togggleLoading}})],1)])]),e._v(" "),n("b-modal",{attrs:{id:"checkin",static:!0,title:"Checkin","hide-footer":""}},[n("b-tabs",{staticClass:"nav-fill flex-column flex-sm-row",attrs:{pills:"",card:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[n("b-tab",{attrs:{active:"",title:"Member"}},[n("b-form",{staticClass:"member-checkin-form",on:{submit:function(t){return t.preventDefault(),e.checkinMember("manual")}}},[n("b-form-group",{attrs:{label:"Member"}},[n("el-select",{attrs:{"remote-method":e.searchMembers,loading:e.searching,required:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Choose a member"},model:{value:e.membership_id,callback:function(t){e.membership_id=t},expression:"membership_id"}},e._l(e.data,(function(option){return n("el-option",{key:option.id,attrs:{label:option.first_name+" "+option.last_name,value:option.id}})})),1)],1),e._v(" "),n("b-button",{staticClass:"float-right member-checkin-btn",attrs:{disabled:e.loading,type:"submit",variant:"primary"}},[e._v("Checkin")])],1)],1),e._v(" "),n("b-tab",{attrs:{title:"Guest"}},[n("b-form",{staticClass:"guest-checkin-form",on:{submit:function(t){return t.preventDefault(),e.checkinGuest(t)}}},[n("b-form-group",{attrs:{label:"Member"}},[n("el-select",{attrs:{"remote-method":e.searchMembers,loading:e.searching,required:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Choose a member"},model:{value:e.membership_id,callback:function(t){e.membership_id=t},expression:"membership_id"}},e._l(e.data,(function(option){return n("el-option",{key:option.id,attrs:{label:option.first_name+" "+option.last_name,value:option.id}})})),1)],1),e._v(" "),n("b-form-group",{attrs:{label:"Bookings"}},[n("el-select",{attrs:{filterable:"",placeholder:"Choose a booking"},model:{value:e.booking_info,callback:function(t){e.booking_info=t},expression:"booking_info"}},e._l(e.bookings,(function(option){return n("el-option",{key:option.id,attrs:{label:option.title,value:option.id+" "+option.membership.id}})})),1)],1),e._v(" "),n("b-form-group",{attrs:{label:"First Name"}},[n("b-form-input",{attrs:{id:"firstName",placeholder:"John",required:""},model:{value:e.first_name,callback:function(t){e.first_name=t},expression:"first_name"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Last Name"}},[n("b-form-input",{attrs:{id:"lastName",placeholder:"Doe",required:""},model:{value:e.last_name,callback:function(t){e.last_name=t},expression:"last_name"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Email"}},[n("b-form-input",{attrs:{id:"email",type:"email",placeholder:"john@doe.com",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Company"}},[n("b-form-input",{attrs:{id:"company",placeholder:"SHACK15",required:""},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}})],1),e._v(" "),n("b-button",{staticClass:"float-right",attrs:{disabled:e.loading,type:"submit",variant:"primary"}},[e._v("Checkin")])],1)],1)],1)],1),e._v(" "),n("div",[n("base-pagination",{attrs:{total:e.meta.total,"per-page":e.meta.per_page,value:e.meta.current_page,align:"center"},on:{next:e.next,prev:e.prev,input:e.changePage}})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);