(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{322:function(e,t,r){"use strict";var n={props:{title:{type:String,default:""},subtitle:{type:String,default:""},info:{type:String,default:""}}},l=r(11),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",{staticClass:"page-title"},[r("span",[e._v(e._s(e.title))]),e._v(" "),r("b",{directives:[{name:"show",rawName:"v-show",value:e.subtitle,expression:"subtitle"}]},[e._v("•")]),e._v(" "+e._s(e.subtitle))])}),[],!1,null,null,null);t.a=component.exports},323:function(e,t,r){"use strict";var n={props:{title:{type:String,default:null},subtitle:{type:String,default:null}}},l=r(11),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h3",{staticClass:"page-title"},[r("span",[e._v(e._s(e.title))]),e._v(" "),r("b",{directives:[{name:"show",rawName:"v-show",value:e.subtitle,expression:"subtitle"}]},[e._v("•")]),e._v(" "+e._s(e.subtitle))])}),[],!1,null,null,null);t.a=component.exports},324:function(e,t,r){},329:function(e,t,r){"use strict";var n=r(324);r.n(n).a},330:function(e,t,r){"use strict";r(40);var n=r(12),l=r(67),o=r.n(l),c={props:{name:{type:String,default:null},label:{type:String,default:null},service:{type:String,default:"images"},url:{type:String,default:null}},data:function(){return{publicUrl:null}},methods:{onFileChange:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.target.files[0]){r.next=3;break}return r.abrupt("return");case 3:if(!(n.size>5e5)){r.next=6;break}return t.$bvToast.toast("File size must not be greater than 500kb",{variant:"warning"}),r.abrupt("return");case 6:return l=n.type,t.url=URL.createObjectURL(n),r.next=10,t.getSignedUrl(l);case 10:return o=r.sent,t.publicUrl=o.public_url,t.$bvToast.toast("Uploading image. Please wait..."),r.next=15,t.uploadUrl(o.signed_url,n,l).then((function(e){t.$emit("input",t.publicUrl),t.$bvToast.toast("Image uploaded successfully",{variant:"success",solid:!0})})).catch((function(e){t.$bvToast.toast(e.message,{title:"Error",variant:"danger",solid:!0})}));case 15:r.sent;case 16:case"end":return r.stop()}}),r)})))()},getSignedUrl:function(e){var t=this,r=this.service;return this.$images.getSignedUrl(r,e).then((function(e){return e.data.data})).catch((function(e){var r=e.response;t.$bvToast.toast(JSON.stringify(r.data.errors),{title:"Error",variant:"danger",solid:!0})}))},uploadUrl:function(e,t,r){var n=this;return o.a.put(e,t,{headers:{"Content-Type":r}}).then((function(e){return e})).catch((function(e){var t=e.response;n.$bvToast.toast(JSON.stringify(t.data),{variant:"danger",solid:!0})}))}}},d=(r(329),r(11)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"mr-b-20",attrs:{id:"preview"}},[e.url?r("img",{attrs:{src:e.url}}):e._e()]),e._v(" "),r("div",{staticClass:"bg-lgray pd-10 pd-l-20 upload-btn-wrapper pd-0"},[r("button",{staticClass:"btn"},[r("i",{staticClass:"fa fa-paperclip mr-r-10"}),e._v(" "+e._s(e.label))]),e._v(" "),r("input",{attrs:{name:e.name,type:"file",accept:"image/*"},on:{change:e.onFileChange}})])])}),[],!1,null,null,null);t.a=component.exports},534:function(e,t,r){"use strict";r.r(t);r(9),r(3),r(7),r(6),r(5),r(8),r(40);var n,l=r(12),o=r(1),c=(r(325),r(116),r(326)),d=r.n(c),v=(r(17),r(327),r(328)),f=r.n(v),m=r(117),y=r(322),_=r(323),h=r(330),w=r(44);function x(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var C={layout:"ShackDash",components:(n={BaseHeader:m.a,MainTitle:y.a,UploadButton:h.a,SectionTitle:_.a},Object(o.a)(n,f.a.name,f.a),Object(o.a)(n,d.a.name,d.a),n),asyncData:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,n=e.$eatry,l=e.error,t.next=3,n.getAllEatryCategories().then((function(data){r.commit("eatry/setCategories",data)})).catch((function(e){l({statusCode:e.status||404,message:e.response?JSON.stringify(e.response.data.errors):e.message})}));case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{loading:!1,name:"",description:"",capacity:10,price:10,eatry_category_id:null,can_order:"",banner_url:"",is_special:"",breakfast:{from:"06:00",to:"11:00",weekdays:[1,6]},lunch:{from:"12:00",to:"14:00",weekdays:[1,6]},dinner:{from:"15:00",to:"00:00",weekdays:[1,6]},all:{from:"00:00",to:"00:00",weekdays:[1,6]},eatry_availability:[]}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(w.b)({categories:function(e){return e.eatry.categories.data}})),methods:{addInventory:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,l,o,c,d,v,f,m,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.name,n=e.description,l=e.capacity,o=e.price,c=e.banner_url,d=e.eatry_category_id,v=e.eatry_availability,f=e.can_order,m=e.is_special,e.loading=!e.loading,y={name:r,description:n,capacity:l,price:o,banner_url:c,eatry_category_id:d,eatry_availability:v,can_order:Boolean(f),is_special:Boolean(m)},e.$eatry.addOneEatry(y).then((function(t){t.data;e.$bvToast.toast("".concat(r," add successfully"),{title:"Success",variant:"success",solid:!0}),setTimeout((function(){e.$router.push({name:"space-eatry-inventory"})}),3e3)})).catch((function(t){var r=t.response?JSON.stringify(t.response.data.errors):t.message;e.$bvToast.toast(r,{title:"Error",variant:"danger",solid:!0}),e.loading=!e.loading}));case 4:case"end":return t.stop()}}),t)})))()}}},k=r(11),component=Object(k.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.addInventory(t)}}},[r("base-header",{staticClass:"pb-6",attrs:{type:""}},[r("div",{staticClass:"d-flex justify-content-between align-items-center py-4"},[r("MainTitle",{attrs:{title:"Add New Inventory"}}),e._v(" "),r("b-button",{staticClass:"btn btn-primary text-white",attrs:{disabled:e.loading,type:"submit"}},[r("i",{staticClass:"fa fa-save"}),e._v(" Add Inventory\n        ")])],1)]),e._v(" "),r("div",{staticClass:"container-fluid mt--6"},[r("div",{staticClass:"card-deck flex-column flex-xl-row"},[r("card",[r("h3",{staticClass:"mr-b-20"},[e._v("New Inventory")]),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"row pd-r-20"},[r("base-input",{staticClass:"col-md-12",attrs:{label:"Name",placeholder:"Inventory Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("div",{staticClass:"form-group col-md-12"},[r("label",[e._v("Description")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"form-control",attrs:{placeholder:"Inventory description",rows:"4","max-rows":"6"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]),e._v(" "),r("base-input",{staticClass:"col-md-6",attrs:{label:"Capacity",type:"number",placeholder:"0"},model:{value:e.capacity,callback:function(t){e.capacity=t},expression:"capacity"}}),e._v(" "),r("base-input",{staticClass:"col-md-6",attrs:{label:"Price",type:"number",step:"0.01",placeholder:"0.00"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1)]),e._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"row pd-l-20"},[r("div",{staticClass:"form-group col-md-12"},[r("label",[e._v("Eatry Category:")]),e._v(" "),r("el-select",{attrs:{placeholder:"Select Category"},model:{value:e.eatry_category_id,callback:function(t){e.eatry_category_id=t},expression:"eatry_category_id"}},e._l(e.categories,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),r("div",{staticClass:"form-group col-md-12"},[r("b-form-group",{attrs:{label:"Eatry Availability"}},[r("b-form-checkbox-group",{model:{value:e.eatry_availability,callback:function(t){e.eatry_availability=t},expression:"eatry_availability"}},[r("b-form-checkbox",{attrs:{value:e.breakfast}},[e._v("Breakfast")]),e._v(" "),r("b-form-checkbox",{attrs:{value:e.lunch}},[e._v("Lunch")]),e._v(" "),r("b-form-checkbox",{attrs:{value:e.dinner}},[e._v("Dinner")]),e._v(" "),r("b-form-checkbox",{attrs:{value:e.all}},[e._v("All Times")])],1)],1)],1),e._v(" "),r("div",{staticClass:"form-group col-md-12"},[r("b-form-checkbox",{attrs:{value:"true"},model:{value:e.can_order,callback:function(t){e.can_order=t},expression:"can_order"}},[e._v("Can members start ordering?")])],1),e._v(" "),r("div",{staticClass:"form-group col-md-12"},[r("b-form-checkbox",{attrs:{value:"true"},model:{value:e.is_special,callback:function(t){e.is_special=t},expression:"is_special"}},[e._v("Is eatry special?")])],1)])]),e._v(" "),r("UploadButton",{attrs:{service:"eatry",label:"Upload Inventory Banner (<500KB & size 1125x582)"},model:{value:e.banner_url,callback:function(t){e.banner_url=t},expression:"banner_url"}})],1)])],1)])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);