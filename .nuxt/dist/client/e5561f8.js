(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{322:function(t,e,n){"use strict";var r={props:{title:{type:String,default:""},subtitle:{type:String,default:""},info:{type:String,default:""}}},o=n(11),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"page-title"},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("b",{directives:[{name:"show",rawName:"v-show",value:t.subtitle,expression:"subtitle"}]},[t._v("•")]),t._v(" "+t._s(t.subtitle))])}),[],!1,null,null,null);e.a=component.exports},323:function(t,e,n){"use strict";var r={props:{title:{type:String,default:null},subtitle:{type:String,default:null}}},o=n(11),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{staticClass:"page-title"},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("b",{directives:[{name:"show",rawName:"v-show",value:t.subtitle,expression:"subtitle"}]},[t._v("•")]),t._v(" "+t._s(t.subtitle))])}),[],!1,null,null,null);e.a=component.exports},373:function(t,e,n){},454:function(t,e,n){"use strict";var r=n(373);n.n(r).a},520:function(t,e,n){"use strict";n.r(e);n(9),n(7),n(6),n(5),n(8),n(17);var r=n(1),o=(n(3),n(40),n(12)),c=n(117),l=n(322),d=n(323),v=n(44),f=n(345),m=n.n(f);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var y={layout:"ShackDash",components:{BaseHeader:c.a,MainTitle:l.a,SectionTitle:d.a},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,t.params,r=t.$event,o=t.error,e.next=3,r.getEvents().then((function(t){var data=t.data;console.log(data),n.commit("events/setEvents",data.filter((function(t){return t.is_drafted})))})).catch((function(t){var e=t.response?JSON.stringify(t.response.data.errros):t.message;o({statusCode:404,message:e})}));case 3:case"end":return e.stop()}}),e)})))()},data:function(){return{loading:!1,calendarPlugin:"dayGridMonth,timeGridWeek,listWeek",currentEvent:{},modals:{classic:!1,notice:!1,form:!1}}},computed:h({},Object(v.b)({events:function(t){return t.events.calendarEvents.filter((function(t){return t.extendedProps.is_drafted}))},space:function(t){return t.space.currentSpace}})),methods:{convertMarkdown:function(text){return(new(n(341).Converter)).makeHtml(text)},getRoomDetail:function(t){if(t.extendedProps)return t.extendedProps.room?t.extendedProps.room.name:t.extendedProps.external_location},formatTime:function(time){return m()(time).tz("Africa/Accra").format("HH:mm")},showEvent:function(t){this.currentEvent=t,console.log(t),this.$bvModal.show("eventModal")},dateChange:function(t){var e=this,n=t.startDate,r=t.endDate;n=this.$moment(n).format("YYYY-MM-DD"),r=this.$moment(r).format("YYYY-MM-DD"),this.$event.getEventsByDate(n,r).then((function(t){var data=t.data.data;e.$store.commit("events/setEvents",data)})).catch((function(t){var n=t.response;e.$bvToast.toast(JSON.stringify(n.data.errors),{title:"Error",variant:"danger",solid:!0})}))},deleteEvent:function(){var t=this;if(confirm("Are you sure?")){var e=this.currentEvent.id;this.$event.deleteEvent(e).then((function(n){t.$store.commit("events/removeEvent",e),t.$bvModal.hide("eventModal")})).catch((function(e){var n=e.response;t.$bvToast.toast(JSON.stringify(n.data.errors),{title:"Error",variant:"danger",solid:!0})}))}},updateEvent:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!t.loading,(n=h({},t.currentEvent.extendedProps)).is_drafted=!1,n.event_category_id=n.event_category.id,e.next=6,t.$event.updateEvent(n.id,h({},n)).then((function(e){e.data;t.$bvToast.toast("Event published successfully",{title:"Success",variant:"success",solid:!0}),t.$router.push({name:"space-events-id",params:{id:n.id}})})).catch((function(e){var n=e.response;t.loading=!t.loading,t.$bvToast.toast(JSON.stringify(n.data.errors),{title:"Error",variant:"danger",solid:!0})}));case 6:case"end":return e.stop()}}),e)})))()}}},E=(n(454),n(11)),component=Object(E.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("base-header",{staticClass:"pb-6",attrs:{type:""}},[n("div",{staticClass:"d-flex justify-content-between align-items-center py-4"},[n("MainTitle",{attrs:{title:"Events",subtitle:"Drafts"}}),t._v(" "),n("nuxt-link",{staticClass:"btn btn-primary",staticStyle:{visibility:"hidden"},attrs:{to:{name:"space-events-add"}}},[t._v("Add Event")])],1)]),t._v(" "),n("div",{staticClass:"container-fluid mt--6"},[n("div",{staticClass:"card-deck flex-column flex-xl-row"},[n("card",[n("client-only",[n("full-calendar",{attrs:{events:t.events,right:t.calendarPlugin},on:{eventClick:t.showEvent,dateChange:t.dateChange}})],1)],1)],1),t._v(" "),n("b-modal",{attrs:{id:"eventModal",size:"lg"},scopedSlots:t._u([{key:"modal-title",fn:function(){return[n("b-row",[n("b-col",{attrs:{md:"12"}},[n("h1",[t._v(t._s(t.currentEvent.title))])])],1)]},proxy:!0},{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100"},[t.currentEvent.extendedProps.is_drafted?[n("b-button",{staticClass:"float-left",attrs:{variant:"primary"},on:{click:t.updateEvent}},[t._v("Publish Event")]),t._v(" "),n("b-button",{staticClass:"text-primary float-left",attrs:{to:{name:"space-events-id-edit",params:{id:t.currentEvent.id}},variant:"transparent"}},[n("i",{staticClass:"fa fa-pen"}),t._v(" Edit Event")])]:n("b-button",{staticClass:"float-left",attrs:{to:{name:"space-events-id-edit",params:{id:t.currentEvent.id}},variant:"primary"}},[t._v("Edit Event")]),t._v(" "),n("b-button",{staticClass:"text-primary float-left",attrs:{to:{name:"space-events-id",params:{id:t.currentEvent.id}},variant:"transparent"}},[n("i",{staticClass:"fa fa-eye"}),t._v(" Preview")]),t._v(" "),n("b-button",{staticClass:"text-primary float-left",attrs:{to:{name:"space-events-id-attendees",params:{id:t.currentEvent.id}},variant:"transparent"}},[n("i",{staticClass:"fa fa-copy"}),t._v(" View Attendees")]),t._v(" "),n("b-button",{staticClass:"text-danger float-right",attrs:{variant:"transparent"},on:{click:t.deleteEvent}},[n("i",{staticClass:"fa fa-times"}),t._v(" Cancel Event\n          ")])],2)]},proxy:!0}])},[t._v(" "),n("b-row",[n("b-col",{attrs:{md:"12"}},[n("p",{staticClass:"d-flex align-items-center text-muted"},[t._v("\n            "+t._s(t.$moment(t.currentEvent.start).format("MMMM DD YYYY"))+",\n            "+t._s(t.formatTime(t.currentEvent.start))+" -\n            "+t._s(t.formatTime(t.currentEvent.end))+"\n            "),n("i",{staticClass:"fa fa-circle mx-2",staticStyle:{"font-size":"5px"}}),t._v("\n            "+t._s(t.getRoomDetail(t.currentEvent))+"\n          ")])])],1),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.currentEvent.extendedProps?t.convertMarkdown(t.currentEvent.extendedProps.description):null)}}),t._v(" "),n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{md:"12"}},[n("p",[t._v("\n            Price:\n            "+t._s(t._f("currency")(t.currentEvent.extendedProps&&t.currentEvent.extendedProps.price,t.space.currency_symbol))+"\n          ")])])],1),t._v(" "),n("b-row",[n("b-col",{attrs:{md:"12"}},[n("badge",{attrs:{type:"info"}},[t._v(t._s(t.currentEvent.extendedProps&&t.currentEvent.extendedProps.event_category.name))])],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);