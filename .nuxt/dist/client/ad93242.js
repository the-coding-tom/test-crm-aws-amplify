(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{322:function(t,e,n){"use strict";var r={props:{title:{type:String,default:""},subtitle:{type:String,default:""},info:{type:String,default:""}}},o=n(11),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"page-title"},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("b",{directives:[{name:"show",rawName:"v-show",value:t.subtitle,expression:"subtitle"}]},[t._v("â€¢")]),t._v(" "+t._s(t.subtitle))])}),[],!1,null,null,null);e.a=component.exports},495:function(t,e,n){"use strict";n.r(e);n(9),n(3),n(7),n(6),n(5),n(8);var r,o=n(1),l=(n(40),n(12)),c=n(117),d=n(322),f=(n(333),n(116),n(334)),m=n.n(f),v=(n(17),n(335),n(336)),y=n.n(v),h=n(44);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var _={name:"Table",components:(r={},Object(o.a)(r,y.a.name,y.a),Object(o.a)(r,m.a.name,m.a),r),props:{plans:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(h.b)({space:function(t){return t.space.currentSpace}})),methods:{removePlan:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!e.loading,n.next=3,e.$plan.removePlan(t.id).then((function(n){e.$bvToast.toast("Plan removed successfully",{title:"Success",variant:"success",solid:!0}),e.$store.commit("plans/removePlan",t.id),e.loading=!e.loading})).catch((function(t){var n=t.response?JSON.stringify(t.response.data.message):t.message;e.$bvToast.toast(n,{title:"Error",variant:"danger",solid:!0}),e.loading=!e.loading}));case 3:case"end":return n.stop()}}),n)})))()}}},w=n(11),j=Object(w.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("el-table",{staticClass:"table-responsive align-items-center table-flush table-striped",attrs:{data:t.plans,"header-row-class-name":"thead-light"}},[n("el-table-column",{attrs:{label:"Plan","min-width":"310px",prop:"name",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("h4",[n("nuxt-link",{attrs:{to:{name:"space-plans-id-edit",params:{id:r.id}}}},[t._v(t._s(r.name))])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Members Subscribed","min-width":"250",prop:"subscriptions",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("h4",[n("nuxt-link",{attrs:{to:{name:"space-members-subscribed",params:{id:r.id},query:{plan:r.id,name:r.name}}}},[t._v(t._s(r.subscriptions.length))])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Subscription Type",prop:"price_per_cycle","min-width":"180px"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v("\n          "+t._s(t._f("currency")(r.price,t.space.currency_symbol))+" every\n          "),12===r.cycle_duration?n("span",[t._v("year")]):n("span",[t._v(t._s(r.invoice_period)+" month(s)")])])]}}])}),t._v(" "),n("el-table-column",{attrs:{"min-width":"140px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("b-button",{staticClass:"text-primary",attrs:{disabled:t.loading,to:{name:"space-plans-id-edit",params:{id:r.id}},type:"submit",variant:"transparent"}},[n("i",{staticClass:"fa fa-pen"}),t._v(" Edit\n        ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{"min-width":"140px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("b-button",{staticClass:"text-danger",attrs:{disabled:t.loading,type:"submit",variant:"transparent"},on:{click:function(e){return t.removePlan(r)}}},[n("i",{staticClass:"fa fa-times"}),t._v(" Remove\n        ")])]}}])})],1)],1)}),[],!1,null,null,null).exports;function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var x={layout:"ShackDash",components:{BaseHeader:c.a,MainTitle:d.a,Table:j},asyncData:function(t){return Object(l.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,r=t.$plan,o=t.error,e.next=3,r.getAllPlan().then((function(t){var data=t.data;n.commit("plans/setPlans",data)})).catch((function(t){o({statusCode:t.statusCode,message:t.response?JSON.stringify(t.response.data.errors):t.message})}));case 3:case"end":return e.stop()}}),e)})))()},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(h.b)({plans:function(t){return t.plans.plans.data},meta:function(t){return t.plans.plans.meta},links:function(t){return t.plans.plans.links}})),methods:{next:function(){var t=this,e=this.links.next;this.$plan.getAllPlan(e).then((function(e){var data=e.data;t.$store.commit("plans/setPlans",data)})).catch((function(e){var n=e.response?JSON.stringify(e.response.data.errors):e.message;t.$bvToast.toast(n,{title:"Error",variant:"danger",solid:!0})}))},prev:function(){var t=this,e=this.links.prev;this.$plan.getAllPlan(e).then((function(e){var data=e.data;t.$store.commit("plans/setPlans",data)})).catch((function(e){var n=e.response?JSON.stringify(e.response.data.errors):e.message;t.$bvToast.toast(n,{title:"Error",variant:"danger",solid:!0})}))}}},S=Object(w.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("base-header",{staticClass:"pb-6",attrs:{type:""}},[n("div",{staticClass:"d-flex justify-content-between align-items-center py-4"},[n("MainTitle",{attrs:{title:"Plans",subtitle:"All"}}),t._v(" "),n("b-button",{staticClass:"text-white",attrs:{to:{name:"space-plans-add"},squared:"",variant:"primary"}},[t._v("Add New Plan")])],1)]),t._v(" "),n("div",{staticClass:"container-fluid mt--6"},[n("div",{staticClass:"card-deck flex-column flex-xl-row"},[n("Table",{attrs:{plans:t.plans}})],1)]),t._v(" "),n("div",[n("base-pagination",{attrs:{total:t.meta.total,"per-page":t.meta.per_page,value:t.meta.current_page,align:"center"},on:{next:t.next,prev:t.prev}})],1)],1)}),[],!1,null,null,null);e.default=S.exports}}]);