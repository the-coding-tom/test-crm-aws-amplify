(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{320:function(e,t,n){"use strict";var r={props:{title:{type:String,default:""},subtitle:{type:String,default:""},info:{type:String,default:""}}},o=n(11),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticClass:"page-title"},[n("span",[e._v(e._s(e.title))]),e._v(" "),n("b",{directives:[{name:"show",rawName:"v-show",value:e.subtitle,expression:"subtitle"}]},[e._v("•")]),e._v(" "+e._s(e.subtitle))])}),[],!1,null,null,null);t.a=component.exports},321:function(e,t,n){"use strict";var r={props:{title:{type:String,default:null},subtitle:{type:String,default:null}}},o=n(11),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h3",{staticClass:"page-title"},[n("span",[e._v(e._s(e.title))]),e._v(" "),n("b",{directives:[{name:"show",rawName:"v-show",value:e.subtitle,expression:"subtitle"}]},[e._v("•")]),e._v(" "+e._s(e.subtitle))])}),[],!1,null,null,null);t.a=component.exports},322:function(e,t,n){},327:function(e,t,n){"use strict";var r=n(322);n.n(r).a},328:function(e,t,n){"use strict";n(40);var r=n(12),o=n(66),l=n.n(o),c={props:{name:{type:String,default:null},label:{type:String,default:null},service:{type:String,default:"images"},url:{type:String,default:null}},data:function(){return{publicUrl:null}},methods:{onFileChange:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.target.files[0]){n.next=3;break}return n.abrupt("return");case 3:if(!(r.size>5e5)){n.next=6;break}return t.$bvToast.toast("File size must not be greater than 500kb",{variant:"warning"}),n.abrupt("return");case 6:return o=r.type,t.url=URL.createObjectURL(r),n.next=10,t.getSignedUrl(o);case 10:return l=n.sent,t.publicUrl=l.public_url,t.$bvToast.toast("Uploading image. Please wait..."),n.next=15,t.uploadUrl(l.signed_url,r,o).then((function(e){t.$emit("input",t.publicUrl),t.$bvToast.toast("Image uploaded successfully",{variant:"success",solid:!0})})).catch((function(e){t.$bvToast.toast(e.message,{title:"Error",variant:"danger",solid:!0})}));case 15:n.sent;case 16:case"end":return n.stop()}}),n)})))()},getSignedUrl:function(e){var t=this,n=this.service;return this.$images.getSignedUrl(n,e).then((function(e){return e.data.data})).catch((function(e){var n=e.response;t.$bvToast.toast(JSON.stringify(n.data.errors),{title:"Error",variant:"danger",solid:!0})}))},uploadUrl:function(e,t,n){var r=this;return l.a.put(e,t,{headers:{"Content-Type":n}}).then((function(e){return e})).catch((function(e){var t=e.response;r.$bvToast.toast(JSON.stringify(t.data),{variant:"danger",solid:!0})}))}}},d=(n(327),n(11)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"mr-b-20",attrs:{id:"preview"}},[e.url?n("img",{attrs:{src:e.url}}):e._e()]),e._v(" "),n("div",{staticClass:"bg-lgray pd-10 pd-l-20 upload-btn-wrapper pd-0"},[n("button",{staticClass:"btn"},[n("i",{staticClass:"fa fa-paperclip mr-r-10"}),e._v(" "+e._s(e.label))]),e._v(" "),n("input",{attrs:{name:e.name,type:"file",accept:"image/*"},on:{change:e.onFileChange}})])])}),[],!1,null,null,null);t.a=component.exports},329:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var r=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t.response)return o(t.response.data.message,n),void(t.response.data.errors&&e.each(t.response.data.errors,(function(t,i){return e.each(t,(function(e,t){return o(e,n)}))})));o(t.message,n)},o=function(e,t){console.log("------------------------------------"),console.log(e),console.log("------------------------------------"),t&&t.$bvToast.toast(e,{title:"Error",variant:"danger"})}}).call(this,n(204))},335:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(18);var r=function(text){var e=new(n(339).Converter),t=text.replace(/([ ]*\n)/g,"<br/>\n").replace(/(<br\/>\n<br\/>\n<br\/>)/g,"<br/><br/>");return e.makeHtml(t)}},336:function(e,t,n){"use strict";var r={props:{value:{type:String,default:""},editorText:{type:String,default:""}},data:function(){return{editorOptions:{useDefaultHTMLSanitizer:!1,usageStatistics:!1,hideModeSwitch:!0,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","image","link","divider","code","codeblock"]},text:this.value}},watch:{text:function(){this.$emit("input",this.text)}},methods:{onEditorChange:function(){this.$refs.toastuiEditor.invoke("getHtml"),this.$refs.toastuiEditor.invoke("getValue");var e=this.$refs.toastuiEditor.invoke("getMarkdown");this.text=e}}},o=n(11),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("client-only",[n("editor",{ref:"toastuiEditor",attrs:{"initial-value":e.editorText,options:e.editorOptions,"initial-edit-type":"wysiwyg","preview-style":"tab"},on:{change:e.onEditorChange},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)],1)}),[],!1,null,null,null);t.a=component.exports},404:function(e,t,n){"use strict";n(9),n(3),n(7),n(6),n(5),n(8);var r=n(0),o=n(42),l=n(329);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var d={name:"EventRooms",props:{value:{type:String,default:""}},data:function(){return{meta:{},links:{},selectedRoom:this.value}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.b)({rooms:function(e){return e.events.rooms}})),watch:{selectedRoom:function(){this.$emit("input",this.selectedRoom)}},created:function(){var e=this;this.$event.getRooms().then((function(t){var data=t.data;e.meta=data.meta,e.links=data.links,e.$store.commit("events/setRooms",data)})).catch((function(t){e.$bvToast.toast("Failed to retrieve rooms",{variant:"danger"}),Object(l.a)(t)}))},methods:{next:function(){var e=this.links.next;this.getRooms(e)},prev:function(){var e=this.links.prev;this.getRooms(e)},getRooms:function(link){var e=this;this.$resource.getAllRooms(link).then((function(t){var data=t.data;e.meta=data.meta,e.links=data.links,e.$store.commit("events/setRooms",data)})).catch((function(t){var n=t.response?"".concat(t.response.data.message," ~ ").concat(JSON.stringify(t.response.data.errors)):t.message;e.$bvToast.toast(n,{variant:"error",title:"Error"})}))}}},m=n(11),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-group col-md-12"},[n("b-form-group",{attrs:{id:"rooms",label:"Rooms Available"}},e._l(e.rooms,(function(t){return n("b-form-radio",{key:t.id,attrs:{value:t.id,name:"room"},model:{value:e.selectedRoom,callback:function(t){e.selectedRoom=t},expression:"selectedRoom"}},[e._v(e._s(t.name))])})),1),e._v(" "),n("div",[n("base-pagination",{attrs:{value:e.meta.current_page,total:e.meta.total,"per-page":15,size:"sm"},on:{next:e.next,prev:e.prev}})],1)],1)}),[],!1,null,null,null);t.a=component.exports},510:function(e,t,n){"use strict";n.r(t);n(9),n(3),n(7),n(6),n(5),n(8),n(18),n(40);var r,o=n(12),l=n(0),c=(n(323),n(115),n(324)),d=n.n(c),m=(n(17),n(325),n(326)),v=n.n(m),f=n(116),h=n(320),_=n(321),x=n(328),y=n(336),k=n(42),O=n(404),j=n(335);function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var C={layout:"ShackDash",name:"EventAdd",components:(r={BaseHeader:f.a,MainTitle:h.a,UploadButton:x.a,SectionTitle:_.a,HtmlEditor:y.a},Object(l.a)(r,v.a.name,v.a),Object(l.a)(r,d.a.name,d.a),Object(l.a)(r,"Room",O.a),r),asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,r=e.$event,t.next=3,r.getEventCategories().then((function(e){var data=e.data;n.commit("events/setCategories",data)})).catch((function(e){error({statusCode:404,message:"Server Error. Try Again !!!"})}));case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{category:"",title:"",description:"",capacity:null,price:null,startTime:"",endTime:"",eventLogo:"",hostLogo:"",sendMail:!1,emailSubject:"Booking Confirmed",emailMessage:"",selectedRoom:null,max_ticket_per_person:null,external:!1,external_location:null,banner_image:""}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(k.b)({categories:function(e){return e.events.categories},space:function(e){return e.space.currentSpace.subdomain}})),mounted:function(){this.startTime=this.$moment().format("YYYY-MM-DD HH:00:00"),this.endTime=this.$moment(this.startTime).add(1,"hour").format("YYYY-MM-DD HH:mm:ss"),this.category=this.categories[0].id},methods:{startChange:function(e){this.endTime=this.$moment(e).add(1,"hour").format("YYYY-MM-DD HH:mm:ss")},convertTextToHtml:function(text){return Object(j.a)(text)},addEvent:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,l,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.$moment(t.startTime).format("YYYY-MM-DD HH:mm:ss"),o=t.$moment(t.endTime).format("YYYY-MM-DD HH:mm:ss"),l=t.convertTextToHtml(t.emailMessage),t.external?t.selectedRoom=null:t.external_location=null,c=t.description.replace(/(?:<br>)/g,"\n"),d={name:t.title,description:c,price:t.price,start_time:r,end_time:o,event_logo:t.eventLogo,host_logo:t.hostLogo,type:"event",room_id:t.selectedRoom,event_category_id:t.category,max_ticket_per_person:t.max_ticket_per_person,total_tickets:t.capacity,send_mail:"true"===t.sendMail,email_subject:t.emailSubject,email_message:l,external_location:t.external_location,banner_image:t.banner_image},"draft"===e&&(d.is_drafted=!0),n.next=9,t.$event.addEvent(d).then((function(n){var data=n.data;t.$bvToast.toast("Event added successfully",{title:"Success",variant:"success",solid:!0}),"draft"===e?t.$router.push({path:"/".concat(t.space,"/events/drafts")}):t.$router.push({path:"/".concat(t.space,"/events/").concat(data.id)})})).catch((function(e){var n=e.response;t.$bvToast.toast(JSON.stringify(n.data.errors),{title:"Error",variant:"danger",solid:!0})}));case 9:case"end":return n.stop()}}),n)})))()}}},E=n(11),component=Object(E.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("base-header",{staticClass:"pb-6",attrs:{type:""}},[n("div",{staticClass:"d-flex justify-content-between align-items-center py-4"},[n("MainTitle",{attrs:{title:"Add New Event"}}),e._v(" "),n("div",[n("b-button",{staticClass:"text-danger",attrs:{variant:"transparent"},on:{click:function(t){return e.addEvent("draft")}}},[n("i",{staticClass:"fa fa-save"}),e._v(" Save As Draft & Close")]),e._v(" "),n("b-button",{staticClass:"btn btn-primary text-white",on:{click:e.addEvent}},[e._v("Add Event")])],1)],1)]),e._v(" "),n("div",{staticClass:"container-fluid mt--6"},[n("div",{staticClass:"card-deck flex-column flex-xl-row"},[n("card",[n("h3",{staticClass:"mr-b-20"},[e._v("Event Details")]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"row pd-r-20"},[n("base-input",{staticClass:"col-md-6",attrs:{id:"title",label:"Event Title"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v(" "),n("base-input",{staticClass:"col-md-6",attrs:{id:"capacity",label:"Capacity",type:"number"},model:{value:e.capacity,callback:function(t){e.capacity=t},expression:"capacity"}}),e._v(" "),n("div",{staticClass:"form-group col-md-12"},[n("label",[e._v("Event Description")]),e._v(" "),n("html-editor",{attrs:{id:"description",placeholder:"Add details about the event"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),n("b-form-group",{staticClass:"col-md-6",attrs:{label:"Start Date"}},[n("client-only",[n("date-picker",{attrs:{id:"startTime","time-picker-options":{start:"00:30",step:"00:15",end:"23:30",format:"hh:mm a"},width:"100%","input-class":"form-control",lang:"en",format:"YYYY-MM-DD HH:mm:ss","value-type":"format",type:"datetime",placeholder:"Select Date"},on:{change:e.startChange},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1)],1),e._v(" "),n("b-form-group",{staticClass:"col-md-6",attrs:{label:"End Date"}},[n("client-only",[n("date-picker",{attrs:{id:"endTime","time-picker-options":{start:"00:30",step:"00:15",end:"23:30",format:"hh:mm a"},width:"100%","input-class":"form-control",lang:"en",format:"YYYY-MM-DD HH:mm:ss","value-type":"format",type:"datetime"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)],1),e._v(" "),n("base-input",{staticClass:"col-md-6",attrs:{id:"price",label:"Price",type:"number",step:"0.01"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}}),e._v(" "),n("base-input",{staticClass:"col-md-6",attrs:{id:"maxTicketPerPerson",label:"Max Ticket Per Person",type:"number"},model:{value:e.max_ticket_per_person,callback:function(t){e.max_ticket_per_person=t},expression:"max_ticket_per_person"}})],1)]),e._v(" "),n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"row pd-l-20"},[n("div",{staticClass:"form-group col-md-12"},[n("label",[e._v("Event Category:")]),e._v(" "),n("el-select",{attrs:{placeholder:"Select Category"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}},e._l(e.categories,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),n("div",{staticClass:"form-group col-md-12"},[n("b-form-checkbox",{attrs:{id:"external-1",value:!0,"unchecked-value":null,name:"external-1"},model:{value:e.external,callback:function(t){e.external=t},expression:"external"}},[e._v("\n                  Host at an external location\n                ")]),e._v(" "),e.external?n("b-form-input",{attrs:{placeholder:"External Location",required:""},model:{value:e.external_location,callback:function(t){e.external_location=t},expression:"external_location"}}):e._e()],1),e._v(" "),e.external?e._e():n("room",{model:{value:e.selectedRoom,callback:function(t){e.selectedRoom=t},expression:"selectedRoom"}}),e._v(" "),n("div",{staticClass:"form-group col-md-12"},[n("b-form-checkbox",{attrs:{id:"sendMailCheckbox",value:"true"},model:{value:e.sendMail,callback:function(t){e.sendMail=t},expression:"sendMail"}},[e._v("Send email to attendees")])],1),e._v(" "),e.sendMail?n("div",{staticClass:"form-group col-md-12"},[n("base-input",{attrs:{id:"emailSubject",label:"Email Subject",placeholder:"Add subject of Email"},model:{value:e.emailSubject,callback:function(t){e.emailSubject=t},expression:"emailSubject"}}),e._v(" "),n("b-form-group",{attrs:{label:"Email Content"}},[n("html-editor",{attrs:{id:"emailMessage",placeholder:"Message body for attendees email"},model:{value:e.emailMessage,callback:function(t){e.emailMessage=t},expression:"emailMessage"}})],1)],1):e._e()],1)])]),e._v(" "),n("UploadButton",{attrs:{service:"event",label:"Upload Event Image (<500KB & size 1125x582)"},model:{value:e.eventLogo,callback:function(t){e.eventLogo=t},expression:"eventLogo"}}),e._v(" "),n("UploadButton",{attrs:{service:"event",label:"Upload Event Banner (<500KB)"},model:{value:e.banner_image,callback:function(t){e.banner_image=t},expression:"banner_image"}}),e._v(" "),n("UploadButton",{attrs:{service:"event",label:"Upload Host Logo (<500KB & size 500x500)"},model:{value:e.hostLogo,callback:function(t){e.hostLogo=t},expression:"hostLogo"}})],1)],1)])],1)}),[],!1,null,null,null);t.default=component.exports}}]);