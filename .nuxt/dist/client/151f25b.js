(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{320:function(t,e,n){"use strict";var r={props:{title:{type:String,default:""},subtitle:{type:String,default:""},info:{type:String,default:""}}},l=n(11),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"page-title"},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("b",{directives:[{name:"show",rawName:"v-show",value:t.subtitle,expression:"subtitle"}]},[t._v("•")]),t._v(" "+t._s(t.subtitle))])}),[],!1,null,null,null);e.a=component.exports},321:function(t,e,n){"use strict";var r={props:{title:{type:String,default:null},subtitle:{type:String,default:null}}},l=n(11),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{staticClass:"page-title"},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("b",{directives:[{name:"show",rawName:"v-show",value:t.subtitle,expression:"subtitle"}]},[t._v("•")]),t._v(" "+t._s(t.subtitle))])}),[],!1,null,null,null);e.a=component.exports},322:function(t,e,n){},327:function(t,e,n){"use strict";var r=n(322);n.n(r).a},328:function(t,e,n){"use strict";n(40);var r=n(12),l=n(66),o=n.n(l),c={props:{name:{type:String,default:null},label:{type:String,default:null},service:{type:String,default:"images"},url:{type:String,default:null}},data:function(){return{publicUrl:null}},methods:{onFileChange:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,l,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.target.files[0]){n.next=3;break}return n.abrupt("return");case 3:if(!(r.size>5e5)){n.next=6;break}return e.$bvToast.toast("File size must not be greater than 500kb",{variant:"warning"}),n.abrupt("return");case 6:return l=r.type,e.url=URL.createObjectURL(r),n.next=10,e.getSignedUrl(l);case 10:return o=n.sent,e.publicUrl=o.public_url,e.$bvToast.toast("Uploading image. Please wait..."),n.next=15,e.uploadUrl(o.signed_url,r,l).then((function(t){e.$emit("input",e.publicUrl),e.$bvToast.toast("Image uploaded successfully",{variant:"success",solid:!0})})).catch((function(t){e.$bvToast.toast(t.message,{title:"Error",variant:"danger",solid:!0})}));case 15:n.sent;case 16:case"end":return n.stop()}}),n)})))()},getSignedUrl:function(t){var e=this,n=this.service;return this.$images.getSignedUrl(n,t).then((function(t){return t.data.data})).catch((function(t){var n=t.response;e.$bvToast.toast(JSON.stringify(n.data.errors),{title:"Error",variant:"danger",solid:!0})}))},uploadUrl:function(t,e,n){var r=this;return o.a.put(t,e,{headers:{"Content-Type":n}}).then((function(t){return t})).catch((function(t){var e=t.response;r.$bvToast.toast(JSON.stringify(e.data),{variant:"danger",solid:!0})}))}}},d=(n(327),n(11)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"mr-b-20",attrs:{id:"preview"}},[t.url?n("img",{attrs:{src:t.url}}):t._e()]),t._v(" "),n("div",{staticClass:"bg-lgray pd-10 pd-l-20 upload-btn-wrapper pd-0"},[n("button",{staticClass:"btn"},[n("i",{staticClass:"fa fa-paperclip mr-r-10"}),t._v(" "+t._s(t.label))]),t._v(" "),n("input",{attrs:{name:t.name,type:"file",accept:"image/*"},on:{change:t.onFileChange}})])])}),[],!1,null,null,null);e.a=component.exports},538:function(t,e,n){"use strict";n.r(e);n(9),n(3),n(7),n(6),n(5),n(8),n(40);var r,l=n(12),o=n(0),c=(n(323),n(115),n(324)),d=n.n(c),m=(n(17),n(325),n(326)),v=n.n(m),f=n(116),h=n(320),_=n(321),y=n(328);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function x(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var C={layout:"ShackDash",components:(r={BaseHeader:f.a,MainTitle:h.a,UploadButton:y.a,SectionTitle:_.a},Object(o.a)(r,v.a.name,v.a),Object(o.a)(r,d.a.name,d.a),r),asyncData:function(t){return Object(l.a)(regeneratorRuntime.mark((function e(){var n,r,l,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$wellness,r=t.route,l=t.error,e.next=3,n.getWellnessCategories().then((function(t){var data=t.data;o=data.data}));case 3:return e.next=5,n.getAWellnessSession(r.params.id).then((function(t){var data=t.data;c=data.data})).catch((function(t){var e=t.response;l({statusCode:404,message:JSON.stringify(e.data.message)})}));case 5:return e.abrupt("return",x(x({categories:o},c),{},{wellness_category_id:o[0].id}));case 6:case"end":return e.stop()}}),e)})))()},data:function(){return{loading:!1,name:"",description:"",price_per_session:0,start_date:"",end_date:"",location:"",duration:30,weekly:!0,wellness_category_id:null,slots:[{day:0,start:"08:00",capacity:1}],banner_url:null,selects:[{text:"Sunday",value:0},{text:"Monday",value:1},{text:"Tuesday",value:2},{text:"Wednesday",value:3},{text:"Thursday",value:4},{text:"Friday",value:5},{text:"Saturday",value:6}],categories:[]}},mounted:function(){this.start_date=this.$moment().add(1,"hour").format("YYYY-MM-DD HH:00:00"),this.end_date=this.$moment(this.start_date).add(this.duration,"minutes").format("YYYY-MM-DD HH:mm:ss"),this.slots[0].day=this.$moment().day(),this.slots[0].start=this.$moment(this.start_date).format("HH:mm")},methods:{toggleLoading:function(){this.loading=!this.loading},addSlot:function(){var t=this.start_date;this.slots.push({day:this.$moment(t).day(),start:this.$moment(t).format("HH:mm"),capacity:1})},removeSlot:function(i){this.slots.splice(i,1)},setEndDate:function(){var t=this.duration,e=this.start_date;this.slots[0].day=this.$moment(e).day(),this.slots[0].start=this.$moment(e).format("HH:mm"),this.end_date=this.$moment(e).add(t,"minutes").format("YYYY-MM-DD HH:mm:ss")},updateWellness:function(){var t=this,e=this.id,n=this.name,r=this.description,l=this.banner_url,o=this.price_per_session,c=(this.duration,this.slots,this.location),d=this.start_date,m=this.end_date,v=(this.weekly,{name:n,description:r,banner_url:l,location:c,start_date:d,end_date:m,wellness_category_id:this.wellness_category_id,price_per_session:o});l||this.$bvToast.toast("No image provided or please wait for image to complete upload"),this.toggleLoading(),this.$wellness.updateWellnessSession(e,v).then((function(e){e.data;t.$bvToast.toast("Wellness updated successfully",{variant:"success",solid:!0}),t.$router.go(-1)})).catch((function(e){var n=e.response;t.toggleLoading(),t.$bvToast.toast(JSON.stringify(n.data.errors))}))}}},S=n(11),component=Object(S.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-form",{on:{submit:function(e){return e.preventDefault(),t.updateWellness(e)}}},[n("base-header",{staticClass:"pb-6",attrs:{type:""}},[n("div",{staticClass:"d-flex justify-content-between align-items-center py-4"},[n("MainTitle",{attrs:{title:"Wellness"}}),t._v(" "),n("b-button",{attrs:{to:t.$route.path+"/slots",variant:"info"}},[t._v("\n          Update Slots\n        ")]),t._v(" "),n("b-button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},attrs:{disabled:t.loading,type:"submit"}},[t._v("Update Wellness")])],1)]),t._v(" "),n("div",{staticClass:"container-fluid mt--6"},[n("div",{staticClass:"card-deck flex-column flex-xl-row"},[n("card",[n("h3",{staticClass:"mr-b-20"},[t._v("Wellness Details")]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"row pd-r-20"},[n("base-input",{staticClass:"col-md-12",attrs:{label:"Name",required:"",placeholder:"Awesome Wellness Sesstion"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("div",{staticClass:"form-group col-md-12"},[n("label",[t._v("Description")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{required:"",placeholder:"Add details about the wellness",rows:"4","max-rows":"6"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),t._v(" "),n("b-form-group",{staticClass:"col-md-6",attrs:{label:"Start Date"}},[n("client-only",[n("date-picker",{attrs:{id:"time",width:"100%","input-class":"form-control",lang:"en",format:"YYYY-MM-DD HH:mm:ss","value-type":"format",confirm:"",type:"datetime",placeholder:"Start Date"},on:{change:t.setEndDate},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),t._v(" "),n("b-form-group",{staticClass:"col-md-6",attrs:{label:"End Date"}},[n("client-only",[n("date-picker",{attrs:{id:"time",width:"100%","input-class":"form-control",lang:"en",format:"YYYY-MM-DD HH:mm:ss","value-type":"format",confirm:"",type:"datetime",placeholder:"End Date"},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1),t._v(" "),n("base-input",{staticClass:"col-md-6",attrs:{label:"Price Per Session",type:"number",step:"0.01",placeholder:"0.00"},model:{value:t.price_per_session,callback:function(e){t.price_per_session=e},expression:"price_per_session"}}),t._v(" "),n("base-input",{staticClass:"col-md-6",attrs:{label:"Location",type:"text",placeholder:"Open Lounge"},model:{value:t.location,callback:function(e){t.location=e},expression:"location"}})],1)]),t._v(" "),n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"row pd-l-20"},[n("div",{staticClass:"form-group col-md-6"},[n("label",[t._v("Wellness Category:")]),t._v(" "),n("el-select",{attrs:{placeholder:"Select Category",required:""},model:{value:t.wellness_category_id,callback:function(e){t.wellness_category_id=e},expression:"wellness_category_id"}},t._l(t.categories,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),n("div",{staticClass:"form-group col-md-6"},[n("label",[t._v("Duration:")]),t._v(" "),n("b-form-input",{attrs:{type:"number",placeholder:"30"},model:{value:t.duration,callback:function(e){t.duration=e},expression:"duration"}}),t._v(" "),n("b-form-text",[t._v("Duration should be a number that denotes minutes. E.g. 30 is 30 mins")])],1)])]),t._v(" "),n("UploadButton",{attrs:{url:t.banner_url,service:"wellness",label:"Upload File (<500KB & size 1125x582)"},model:{value:t.banner_url,callback:function(e){t.banner_url=e},expression:"banner_url"}})],1)])],1)])],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);