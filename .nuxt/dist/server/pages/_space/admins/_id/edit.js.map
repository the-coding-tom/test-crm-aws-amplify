{"version":3,"file":"pages/_space/admins/_id/edit.js","sources":["webpack:///./components/shack/UploadButton.vue?1a15","webpack:///./components/shack/UploadButton.vue?7fe5","webpack:///./components/shack/UploadButton.vue?6823","webpack:///./components/shack/UploadButton.vue","webpack:///edit.vue","webpack:///./pages/_space/admins/_id/edit.vue?e30c","webpack:///./pages/_space/admins/_id/edit.vue?8ccc","webpack:///./pages/_space/admins/_id/edit.vue","webpack:///./components/shack/MainTitle.vue?4b3c","webpack:///MainTitle.vue","webpack:///./components/shack/MainTitle.vue?cbd3","webpack:///./components/shack/MainTitle.vue","webpack:///UploadButton.vue","webpack:///./components/shack/UploadButton.vue?fe4a"],"sourcesContent":["import mod from \"-!../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-0!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadButton.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-0!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadButton.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<div id=\\\"preview\\\" class=\\\"mr-b-20\\\">\"+((_vm.url)?(\"<img\"+(_vm._ssrAttr(\"src\",_vm.url))+\">\"):\"<!---->\")+\"</div> <div class=\\\"bg-lgray pd-10 pd-l-20 upload-btn-wrapper pd-0\\\"><button class=\\\"btn\\\"><i class=\\\"fa fa-paperclip mr-r-10\\\"></i>\"+_vm._ssrEscape(\" \"+_vm._s(_vm.label))+\"</button> <input\"+(_vm._ssrAttr(\"name\",_vm.name))+\" type=\\\"file\\\" accept=\\\"image/*\\\"></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadButton.vue?vue&type=template&id=04e589d2&\"\nimport script from \"./UploadButton.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadButton.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./UploadButton.vue?vue&type=style&index=0&lang=css&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"77e4a826\"\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <b-form @submit.prevent=\"updateAdmin\">\n      <base-header\n        class=\"pb-6\"\n        type>\n        <div class=\"d-flex justify-content-between align-items-center py-4\">\n          <MainTitle\n            title=\"Adminstrators\"\n            subtitle=\"Update Admin\" />\n          <b-button\n            :disabled=\"loading\"\n            class=\"btn btn-primary text-white\"\n            type=\"submit\"\n          >Update Adminstrator</b-button>\n        </div>\n      </base-header>\n\n\n\n      <div class=\"container-fluid mt--6\">\n\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <card>\n              <div class=\"d-flex align-items-center mr-b-20\">\n                <img\n                  :src=\"url ? url : '/img/placeholder.jpg'\"\n                  class=\"mr-r-20 rounded-circle avatar-xl\">\n                <div>\n                  <div class=\"upload-btn-wrapper\">\n                    <button class=\"btn btn-outline-primary sh-btn-outline\"> UPLOAD PHOTO </button>\n                    <input\n                      type=\"file\"\n                      @change=\"onFileChange\">\n                  </div>\n                </div>\n              </div>\n              <div class=\"row\">\n\n                <base-input\n                  id=\"firstName\"\n                  v-model=\"first_name\"\n                  class=\"col-md-6\"\n                  label=\"First Name\"\n                  placeholder=\"First Name\"/>\n                <base-input\n                  id=\"lastName\"\n                  v-model=\"last_name\"\n                  :required=\"false\"\n                  class=\"col-md-6\"\n                  label=\"Last Name\"\n                  placeholder=\"Last Name\"/>\n                <base-input\n                  id=\"#password\"\n                  v-model=\"password\"\n                  type=\"password\"\n                  class=\"col-md-6\"\n                  label=\"Password\"\n                  placeholder=\"********\"/>\n\n              </div>\n            </card>\n          </div>\n        </div>\n\n      </div>\n    </b-form>\n  </div>\n</template>\n<script>\nimport MainTitle from '~/components/shack/MainTitle.vue'\nimport UploadButton from '~/components/shack/UploadButton.vue'\nimport axios from 'axios'\n\nexport default {\n  layout: 'ShackDash',\n  components: {\n    MainTitle,\n    UploadButton\n  },\n  async asyncData({ $admin, error, params }) {\n    const { id } = params\n\n    return await $admin\n      .getAnAdmin(id)\n      .then(({ data }) => {\n        return {\n          id,\n          first_name: data.profile && data.profile.first_name,\n          last_name: data.profile && data.profile.last_name,\n          url: data.profile && data.profile.picture\n        }\n      })\n      .catch(err => {\n        error({\n          statusCode: err.status || 404,\n          message: err\n        })\n      })\n  },\n  data() {\n    return {\n      url: null,\n      loading: false,\n      first_name: '',\n      last_name: '',\n      picture: '',\n      email: '',\n      password: '',\n      service: 'images'\n    }\n  },\n  methods: {\n    async onFileChange(e) {\n      const file = e.target.files[0]\n\n      if (!file) {\n        return\n      }\n\n      if (file.size > 500000) {\n        this.$bvToast.toast('File size must not be greater than 500kb', {\n          variant: 'warning'\n        })\n        return\n      }\n\n      let mime = file.type\n\n      this.url = URL.createObjectURL(file)\n\n      let upload = await this.getSignedUrl(mime)\n      this.picture = upload.public_url\n\n      this.$bvToast.toast('Uploading image. Please wait...')\n\n      //upload image here\n      let uploadUrl = await this.uploadUrl(upload.signed_url, file, mime)\n        .then(res => {\n          this.$emit('input', this.publicUrl)\n\n          this.$bvToast.toast('Image uploaded successfully', {\n            variant: 'success',\n            solid: true\n          })\n        })\n        .catch(e => {\n          this.$bvToast.toast(e.message, {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n        })\n    },\n    getSignedUrl(mime) {\n      const { service } = this\n\n      return this.$images\n        .getSignedUrl(service, mime)\n        .then(({ data }) => {\n          return data.data\n        })\n        .catch(({ response }) => {\n          this.$bvToast.toast(JSON.stringify(response.data.errors), {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n        })\n    },\n    uploadUrl(url, file, mime) {\n      return axios\n        .put(url, file, {\n          headers: {\n            'Content-Type': mime\n          }\n        })\n        .then(res => {\n          return res\n        })\n        .catch(({ response }) => {\n          this.$bvToast.toast(JSON.stringify(response.data), {\n            variant: 'danger',\n            solid: true\n          })\n        })\n    },\n    updateAdmin() {\n      const { id, first_name, last_name, picture } = this\n\n      this.loading = !this.loading\n\n      this.$admin\n        .updateAnAdmin(id, { first_name, last_name, picture })\n        .then(res => {\n          this.loading = !this.loading\n          this.$bvToast.toast(`Profile updated successfully`, {\n            title: 'Success',\n            variant: 'success',\n            solid: true\n          })\n          this.$router.push({\n            name: 'space-admins'\n          })\n        })\n        .catch(e => {\n          const message = e.response\n            ? `${e.response.data.message} ~ ${JSON.stringify(\n                e.response.data.errors\n              )}`\n            : e.message\n          this.$bvToast.toast(message, {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n          this.loading = !this.loading\n        })\n    }\n  }\n}\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.updateAdmin($event)}}},[_c('base-header',{staticClass:\"pb-6\",attrs:{\"type\":\"\"}},[_c('div',{staticClass:\"d-flex justify-content-between align-items-center py-4\"},[_c('MainTitle',{attrs:{\"title\":\"Adminstrators\",\"subtitle\":\"Update Admin\"}}),_vm._v(\" \"),_c('b-button',{staticClass:\"btn btn-primary text-white\",attrs:{\"disabled\":_vm.loading,\"type\":\"submit\"}},[_vm._v(\"Update Adminstrator\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"container-fluid mt--6\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6\"},[_c('card',[_c('div',{staticClass:\"d-flex align-items-center mr-b-20\"},[_c('img',{staticClass:\"mr-r-20 rounded-circle avatar-xl\",attrs:{\"src\":_vm.url ? _vm.url : '/img/placeholder.jpg'}}),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"upload-btn-wrapper\"},[_c('button',{staticClass:\"btn btn-outline-primary sh-btn-outline\"},[_vm._v(\" UPLOAD PHOTO \")]),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"file\"},on:{\"change\":_vm.onFileChange}})])])]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('base-input',{staticClass:\"col-md-6\",attrs:{\"id\":\"firstName\",\"label\":\"First Name\",\"placeholder\":\"First Name\"},model:{value:(_vm.first_name),callback:function ($$v) {_vm.first_name=$$v},expression:\"first_name\"}}),_vm._v(\" \"),_c('base-input',{staticClass:\"col-md-6\",attrs:{\"id\":\"lastName\",\"required\":false,\"label\":\"Last Name\",\"placeholder\":\"Last Name\"},model:{value:(_vm.last_name),callback:function ($$v) {_vm.last_name=$$v},expression:\"last_name\"}}),_vm._v(\" \"),_c('base-input',{staticClass:\"col-md-6\",attrs:{\"id\":\"#password\",\"type\":\"password\",\"label\":\"Password\",\"placeholder\":\"********\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1)])],1)])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit.vue?vue&type=template&id=99359fb2&\"\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"3f7569c4\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',{staticClass:\"page-title\"},[_vm._ssrNode(\"<span>\"+_vm._ssrEscape(_vm._s(_vm.title))+\"</span> <b\"+(_vm._ssrStyle(null,null, { display: (_vm.subtitle) ? '' : 'none' }))+\">•</b>\"+_vm._ssrEscape(\" \"+_vm._s(_vm.subtitle)))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <h1 class=\"page-title\"><span>{{ title }}</span> <b v-show=\"subtitle\">•</b> {{ subtitle }}</h1>\n</template>\n\n<script>\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    subtitle: {\n      type: String,\n      default: ''\n    },\n    info: {\n      type: String,\n      default: ''\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainTitle.vue?vue&type=template&id=eb42120a&\"\nimport script from \"./MainTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./MainTitle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"2927529c\"\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <div\n      id=\"preview\"\n      class=\"mr-b-20\">\n      <img\n        v-if=\"url\"\n        :src=\"url\" >\n    </div>\n    <div class=\"bg-lgray pd-10 pd-l-20 upload-btn-wrapper pd-0\">\n      <button class=\"btn\"><i class=\"fa fa-paperclip mr-r-10\"/> {{ label }}</button>\n      <input\n        :name=\"name\"\n        type=\"file\"\n        accept=\"image/*\"\n        @change=\"onFileChange\" >\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  props: {\n    name: {\n      type: String,\n      default: null\n    },\n    label: {\n      type: String,\n      default: null\n    },\n    service: {\n      type: String,\n      default: 'images'\n    },\n    url: {\n      type: String,\n      default: null\n    }\n  },\n  data() {\n    return {\n      publicUrl: null\n    }\n  },\n  methods: {\n    async onFileChange(e) {\n      const file = e.target.files[0]\n\n      if (!file) {\n        return\n      }\n\n      if (file.size > 500000) {\n        this.$bvToast.toast('File size must not be greater than 500kb', {\n          variant: 'warning'\n        })\n        return\n      }\n\n      let mime = file.type\n\n      this.url = URL.createObjectURL(file)\n\n      let upload = await this.getSignedUrl(mime)\n      this.publicUrl = upload.public_url\n\n      this.$bvToast.toast('Uploading image. Please wait...')\n\n      //upload image here\n      let uploadUrl = await this.uploadUrl(upload.signed_url, file, mime)\n        .then(res => {\n          this.$emit('input', this.publicUrl)\n\n          this.$bvToast.toast('Image uploaded successfully', {\n            variant: 'success',\n            solid: true\n          })\n        })\n        .catch(e => {\n          this.$bvToast.toast(e.message, {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n        })\n    },\n    getSignedUrl(mime) {\n      const { service } = this\n\n      return this.$images\n        .getSignedUrl(service, mime)\n        .then(({ data }) => {\n          return data.data\n        })\n        .catch(({ response }) => {\n          this.$bvToast.toast(JSON.stringify(response.data.errors), {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n        })\n    },\n    uploadUrl(url, file, mime) {\n      return axios\n        .put(url, file, {\n          headers: {\n            'Content-Type': mime\n          }\n        })\n        .then(res => {\n          return res\n        })\n        .catch(({ response }) => {\n          this.$bvToast.toast(JSON.stringify(response.data), {\n            variant: 'danger',\n            solid: true\n          })\n        })\n    }\n  }\n}\n</script>\n<style>\n#preview {\n}\n\n#preview img {\n  max-width: 200px;\n}\n</style>\n","// Exports\nmodule.exports = {};\n"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;ACAA;AACA;AACA;;;;;;;;ACFA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgDA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AAEA;AACA;AADA;AADA;AAMA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AADA;AAGA;AAEA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AA3GA;AAtCA;;;;;;;;;;;;;AC3EA;AACA;AACA;;;;;;;;ACFA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AClBA;AACA;AACA;;;;;;;;;ACGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AATA;AADA;;ACLA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAbA;AACA;AAiBA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AAEA;AACA;AADA;AADA;AAMA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AA3EA;AAxBA;;;;;;;;ACvBA;AACA;;;;;A","sourceRoot":""}