{"version":3,"file":"pages/_space/resources/bookings/index.js","sources":["webpack:///index.vue","webpack:///Modal.vue","webpack:///./pages/_space/resources/bookings/index.vue?51c1","webpack:///./pages/_space/resources/bookings/index.vue?9467","webpack:///./components/bookings/Modal.vue?7183","webpack:///./components/bookings/Modal.vue?c3e0","webpack:///./components/bookings/Modal.vue","webpack:///./pages/_space/resources/bookings/index.vue?60c0","webpack:///./pages/_space/resources/bookings/index.vue?3338","webpack:///./pages/_space/resources/bookings/index.vue","webpack:///./components/shack/MainTitle.vue?4b3c","webpack:///MainTitle.vue","webpack:///./components/shack/MainTitle.vue?cbd3","webpack:///./components/shack/MainTitle.vue","webpack:///./node_modules/element-ui/lib/theme-chalk/option.css","webpack:///./node_modules/element-ui/lib/theme-chalk/select.css"],"sourcesContent":["<template>\n  <div>\n    <base-header \n      class=\"pb-6\" \n      type=\"\">\n      <div class=\"d-flex justify-content-between align-items-center py-4\">\n        <MainTitle \n          title=\"Bookings\" \n          subtitle=\"Calendar\" />\n        <b-button \n          v-b-modal.new-booking-modal \n          id=\"modal-btn\" \n          variant=\"primary\"\n        >Add New Booking</b-button\n        >\n      </div>\n    </base-header>\n\n    <div class=\"container-fluid mt--6\">\n      <div class=\"card-deck flex-column flex-xl-row\">\n        <card>\n          <b-modal\n            v-if=\"showmodal\"\n            id=\"booking-modal\"\n            :title=\"modalText\"\n            hide-footer\n          >\n            <booking-modal\n              :ifrom=\"bookdata.from\"\n              :ito=\"bookdata.to\"\n              :ititle=\"bookdata.title\"\n              :imembership_id=\"bookdata.membership_id\"\n              :iroom_id=\"bookdata.room_id\"\n              :disableddates=\"disabledates\"\n              @details=\"submitBooking\"\n              @deleteBooking=\"cancelBook\"\n            />\n          </b-modal>\n          <b-modal \n            id=\"new-booking-modal\" \n            hide-footer \n            title=\"Add New Booking\">\n            <b-form @submit.prevent=\"addBooking\">\n              <b-row>\n                <b-form-group \n                  class=\"col-md-12\" \n                  label=\"Member\">\n                  <el-select\n                    v-model=\"newBooking.membership_id\"\n                    :remote-method=\"searchMembers\"\n                    :loading=\"loading\"\n                    required\n                    filterable\n                    remote\n                    reserve-keyword\n                    placeholder=\"Choose a member\"\n                    @change=\"valueChange\"\n                  >\n                    <el-option\n                      v-for=\"option in data\"\n                      :key=\"option.id\"\n                      :label=\"option.first_name + ' ' + option.last_name\"\n                      :value=\"option.id\"\n                    />\n                  </el-select>\n                </b-form-group>\n                <b-form-group \n                  class=\"col-md-12\" \n                  label=\"Resource to book\">\n                  <el-select\n                    v-model=\"newBooking.room_id\"\n                    :remote-method=\"searchResource\"\n                    :loading=\"searching\"\n                    required\n                    filterable\n                    remote\n                    reserve-keyword\n                    placeholder=\"Choose a resource\"\n                  >\n                    <el-option\n                      v-for=\"option in allRooms\"\n                      :key=\"option.id\"\n                      :label=\"option.name\"\n                      :value=\"option.id\"\n                    />\n                  </el-select>\n                </b-form-group>\n                <b-form-group \n                  class=\"col-md-12\" \n                  label=\"Choose payment type\">\n                  <el-select\n                    v-model=\"newBooking.source\"\n                    :disabled=\"!newBooking.membership_id\"\n                    required\n                    placeholder=\"Choose payment type\"\n                    @change=\"getPaymentMethods\"\n                  >\n                    <el-option\n                      v-for=\"option in paymenttype\"\n                      :key=\"option.id\"\n                      :label=\"option.name\"\n                      :value=\"option.name\"\n                    />\n                  </el-select>\n                </b-form-group>\n                <b-form-group\n                  v-if=\"newBooking.source == 'card'\"\n                  class=\"col-md-12\"\n                  label=\"Choose card\"\n                >\n                  <el-select\n                    v-model=\"newBooking.payment_method\"\n                    required\n                    placeholder=\"Choose card\"\n                  >\n                    <el-option\n                      v-for=\"option in payCards\"\n                      :key=\"option.id\"\n                      :label=\"\n                        option.card_brand + ' xxxx-xxxx-xxxx-' + option.last_4\n                      \"\n                      :value=\"option.id\"\n                    />\n                  </el-select>\n                </b-form-group>\n                <b-form-group \n                  label=\"From\" \n                  class=\"col-md-6\">\n                  <client-only>\n                    <date-picker\n                      id=\"time\"\n                      v-model=\"newBooking.from\"\n                      :time-picker-options=\"timePickerOptions\"\n                      :not-before=\"not_before\"\n                      :disabled-days=\"disabledates\"\n                      width=\"100%\"\n                      input-class=\"form-control\"\n                      lang=\"en\"\n                      format=\"YYYY-MM-DD HH:mm\"\n                      value-type=\"format\"\n                      confirm\n                      type=\"time\"\n                    />\n                  </client-only>\n                </b-form-group>\n                <b-form-group \n                  label=\"To\" \n                  class=\"col-md-6\">\n                  <client-only>\n                    <date-picker\n                      id=\"time\"\n                      v-model=\"newBooking.to\"\n                      :time-picker-options=\"timePickerOptions\"\n                      :not-before=\"not_before\"\n                      :disabled-days=\"disabledates\"\n                      width=\"100%\"\n                      input-class=\"form-control\"\n                      lang=\"en\"\n                      format=\"YYYY-MM-DD HH:mm\"\n                      value-type=\"format\"\n                      confirm\n                      type=\"time\"\n                    />\n                  </client-only>\n                </b-form-group>\n                <b-form-group \n                  class=\"col-md-12\" \n                  label=\"Title for Booking\"\n                ><b-form-input\n                  v-model=\"newBooking.title\"\n                  type=\"text\"\n                  placeholder=\"Title for booking\"\n                  required\n                /></b-form-group>\n              </b-row>\n              <b-button \n                :disabled=\"processing\" \n                type=\"submit\" \n                variant=\"primary\"\n              >Book</b-button\n              >\n            </b-form>\n          </b-modal>\n          <client-only>\n            <full-calendar\n              :events=\"bookings\"\n              :views=\"views\"\n              :resources=\"fetchResources\"\n              :right=\"calendarPlugin\"\n              :default-view=\"'resourceTimelineDay'\"\n              @eventClick=\"eventClick\"\n              @dateClick=\"bookDate\"\n              @dateChange=\"dateChange\"\n              @viewSwitched=\"viewSwitched\"\n            />\n          </client-only>\n        </card>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n// Components\nimport BaseHeader from '@/components/argon-core/BaseHeader'\nimport MainTitle from '~/components/shack/MainTitle.vue'\nimport Modal from '~/components/bookings/Modal'\n\nimport { mapState } from 'vuex'\nimport { mapFields } from 'vuex-map-fields'\nimport { Select, Option } from 'element-ui'\nimport axios from 'axios'\n\nexport default {\n  layout: 'ShackDash',\n  components: {\n    BookingModal: Modal,\n    BaseHeader,\n    MainTitle,\n    [Select.name]: Select,\n    [Option.name]: Option\n  },\n  async asyncData({ store, $membership, $resource, error }) {\n    try {\n      await store.dispatch('resources/getAllBookings')\n      await store.dispatch('resources/getAllRooms')\n\n      const link = 'filter[status]=accepted&include=profile'\n\n      return await $membership.getAllMemberships(link).then(({ data }) => {\n        return { data }\n      })\n    } catch (e) {\n      const message = e.response ? e.response.data.message : e.message\n\n      error({ statusCode: e.statusCode, message: message })\n    }\n  },\n  data() {\n    return {\n      processing: false,\n      loading: false,\n      searching: false,\n      newBooking: {\n        from: null,\n        to: null,\n        title: null,\n        membership_id: null,\n        room_id: null,\n        payment_method: null,\n        card: null,\n        source: null,\n        purpose: 'room-booking'\n      },\n      timePickerOptions: {\n        start: '00:00',\n        step: '00:15',\n        end: '23:30'\n      },\n      calendarPlugin:\n        'resourceTimelineMonth,resourceTimelineWeek,listWeek,resourceTimelineDay',\n      currentViewType: 'listWeek',\n      views: {\n        listWeek: {\n          noEventsMessage: 'No bookings to display'\n        }\n      },\n      bookdata: {\n        from: null,\n        to: null,\n        title: null,\n        membership_id: null,\n        room_id: null,\n        booking_id: null\n      },\n      modalText: 'Add New Booking',\n      showmodal: true,\n      modalUpdate: false,\n      disabledates: [],\n      paymenttype: [{ id: 1, name: 'card' }, { id: 2, name: 'credit' }],\n      payCards: []\n    }\n  },\n  computed: {\n    ...mapState({\n      allRooms: state => state.resources.rooms.data,\n      bookings: state => state.resources.bookings,\n      space: state => state.space.currentSpace\n    }),\n    ...mapFields({\n      from: 'resources.addBooking.from',\n      to: 'resources.addBooking.to',\n      title: 'resources.addBooking.title',\n      id: 'resources.addBooking.id'\n    }),\n    not_before() {\n      return this.$moment().format('HH:mm')\n    }\n  },\n  created() {\n    this.bookings.map(booked => {\n      this.disabledates.push(booked.start)\n      this.disabledates.push(booked.end)\n    })\n  },\n  methods: {\n    fetchResources(fetchInfo, successCallback, failureCallback) {\n      this.$resource\n        .getAllBookableResources()\n        .then(({ data: { data } }) => {\n          successCallback(data)\n        })\n        .catch(e => {\n          console.log(e)\n        })\n    },\n    valueChange(value) {\n      this.newBooking.source = null\n    },\n    searchMembers(query) {\n      const link = `filter[search]=${query}`\n\n      this.loading = !this.loading\n\n      const _self = this\n\n      _.debounce(() => {\n        _self.$membership.getAllMemberships(link).then(({ data }) => {\n          _self.loading = !_self.loading\n          _self.data = data\n        })\n      }, 350)()\n    },\n    async searchResource(query) {\n      this.searching = !this.searching\n      const link = `/${this.space.subdomain}/admin/rooms/?search=${query}`\n\n      await this.$store.dispatch('resources/getAllRooms', link)\n      this.searching = !this.searching\n    },\n    eventClick(e) {\n      console.log(\n        this.$moment(e.start)\n          .utc()\n          .format()\n      )\n      this.bookdata.from = this.$moment(e.start)\n        .utc()\n        .format('YYYY-MM-DD HH:mm')\n      this.bookdata.to = this.$moment(e.end)\n        .utc()\n        .format('YYYY-MM-DD HH:mm')\n      this.bookdata.title = e.title\n      this.bookdata.membership_id = e.extendedProps.extendProps.membership.id\n      this.bookdata.room_id = e.extendedProps.extendProps.room.id\n      this.bookdata.booking_id = e.extendedProps.extendProps.id\n      this.modalText = 'Update Booking'\n      this.modalUpdate = true\n      this.$bvModal.show('booking-modal')\n    },\n    bookDate(e) {\n      this.newBooking.from = this.$moment(e).format('YYYY-MM-DD HH:mm')\n      this.newBooking.to = this.$moment(e)\n        .add(1, 'hour')\n        .format('YYYY-MM-DD HH:mm')\n      this.$bvModal.show('new-booking-modal')\n    },\n    dateChange(e) {\n      const data = {\n        from: this.$moment(e.startDate).format('YYYY-MM-DD'),\n        to: this.$moment(e.endDate).format('YYYY-MM-DD')\n      }\n      this.$store.dispatch('resources/getAllBookingsByDate', data)\n    },\n    getRoomBook(id) {\n      this.$store.dispatch('resources/bookingsForARoom', id)\n    },\n    addBooking() {\n      const { newBooking } = this\n      this.processing = !this.processing\n      this.$resource\n        .bookRoomForMember(newBooking.room_id, newBooking)\n        .then(res => {\n          this.$bvToast.toast('Booking successful', {\n            title: 'Success',\n            variant: 'success'\n          })\n\n          location.reload()\n        })\n        .catch(e => {\n          this.processing = !this.processing\n          const message = e.response\n            ? `${e.response.data.message} ${JSON.stringify(\n                e.response.data.errors\n              )}`\n            : e.message\n\n          this.$bvToast.toast(message, {\n            title: 'Error',\n            variant: 'danger'\n          })\n        })\n    },\n    submitBooking(e) {\n      const data = {\n        from: this.$moment(e.from).format('YYYY-MM-DD HH:mm'),\n        to: this.$moment(e.to).format('YYYY-MM-DD HH:mm'),\n        title: e.title,\n        membership_id: e.membership_id,\n        room_id: e.room_id,\n        booking_id: this.bookdata.booking_id\n      }\n      let ms = this.$moment(data.to).diff(this.$moment(data.from))\n      if (ms < 900000) {\n        return this.$bvToast.toast(\n          'Minimum booking duration should be 15 munites and above',\n          {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          }\n        )\n      }\n      if (this.modalUpdate && this.bookdata.booking_id) {\n        this.updateBooking(data)\n      } else {\n        this.$store.dispatch('resources/createBooking', data)\n        this.$bvModal.hide('booking-modal')\n      }\n    },\n    async cancelBook() {\n      await this.$resource.cancelRoomBooking(this.bookdata.booking_id)\n      this.$bvToast.toast('Booking cancelled', {\n        title: 'Success',\n        variant: 'success'\n      })\n      this.$bvModal.hide('booking-modal')\n      location.reload()\n    },\n    async updateBooking(data) {\n      await this.$store.dispatch('resources/updateRoomBooking', data)\n\n      location.reload()\n      // this.$bvModal.hide('booking-modal')\n    },\n    async getPaymentMethods(e) {\n      if (e == 'card') {\n        const result = await this.$membership.getPaymentMethods(\n          this.newBooking.membership_id\n        )\n        this.payCards = result.data\n      }\n    },\n    viewSwitched(eventData) {\n      //this.currentViewType =\n      //eventData.viewType == 'listYear' ? 'listWeek' : eventData.viewType\n    }\n  }\n}\n</script>\n\n<style>\n.fc-title {\n  color: #000 !important;\n}\n</style>\n","<template>\n  <div>\n    <b-form @submit.prevent=\"submitDetails\">\n      <b-row>\n        <b-form-group \n          class=\"col-md-12\" \n          label=\"Member\">\n          <b-form-select\n            :options=\"members\"\n            v-model=\"membership_id\"\n            :value=\"membership_id\"\n            required\n          />\n        </b-form-group>\n      </b-row>\n      <b-row>\n        <b-form-group \n          class=\"col-md-12\" \n          label=\"Room\">\n          <b-form-select\n            :options=\"rooms\"\n            v-model=\"room_id\"\n            :value=\"room_id\"\n            required\n          />\n        </b-form-group>\n      </b-row>\n      <b-row>\n        <b-form-group \n          class=\"col-md-6\" \n          label=\"From\">\n          <client-only>\n            <date-picker\n              id=\"time\"\n              v-model=\"from\"\n              :time-picker-options=\"timePickerOptions\"\n              :disabled-days=\"disableddates\"\n              width=\"100%\"\n              input-class=\"form-control\"\n              lang=\"en\"\n              format=\"YYYY-MM-DD HH:mm\"\n              value-type=\"format\"\n              confirm\n              type=\"datetime\"\n              @change=\"changeDate\"\n            />\n          </client-only>\n        </b-form-group>\n        <b-form-group \n          class=\"col-md-6\" \n          label=\"To\">\n          <client-only>\n            <date-picker\n              id=\"time\"\n              v-model=\"to\"\n              :time-picker-options=\"timePickerOptions\"\n              :disabled-days=\"disableddates\"\n              width=\"100%\"\n              input-class=\"form-control\"\n              lang=\"en\"\n              format=\"YYYY-MM-DD HH:mm\"\n              value-type=\"format\"\n              confirm\n              type=\"datetime\"\n            />\n          </client-only>\n        </b-form-group>\n      </b-row>\n      <b-row>\n        <b-form-group \n          class=\"col-md-12\" \n          label=\"Title\">\n          <b-form-input\n            v-model=\"title\"\n            placeholder=\"Reason for booking\"\n            required\n          />\n        </b-form-group>\n      </b-row>\n      <b-row>\n        <b-form-group class=\"col-md-12\">\n          <b-button \n            type=\"submit\" \n            variant=\"primary\">Save</b-button>\n          <b-button\n            type=\"button\"\n            class=\"float-right\"\n            variant=\"default\"\n            @click=\"cancelBooking\"\n          >Cancel Booking</b-button\n          >\n        </b-form-group>\n      </b-row>\n    </b-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    ifrom: {\n      type: String,\n      default: null\n    },\n    ito: {\n      type: String,\n      default: null\n    },\n    ititle: {\n      type: String,\n      default: null\n    },\n    imembership_id: {\n      type: String,\n      default: null\n    },\n    iroom_id: {\n      type: String,\n      default: null\n    },\n    disableddates: {\n      type: Array,\n      default: null\n    }\n  },\n  data: () => ({\n    membership_id: '',\n    from: '',\n    to: '',\n    title: '',\n    members: [],\n    rooms: [],\n    room_id: '',\n    timePickerOptions: {\n      start: '00:00',\n      step: '00:15',\n      end: '23:30'\n    }\n  }),\n  mounted() {\n    this.from = this.ifrom\n      ? this.ifrom\n      : this.$moment().format('YYYY-MM-DD HH:mm')\n    this.to = this.ito\n      ? this.ito\n      : this.$moment()\n          .add(1, 'hour')\n          .format('YYYY-MM-DD HH:mm')\n    this.title = this.ititle && this.ititle\n    this.membership_id = this.imembership_id && this.imembership_id\n    console.log(this.membership_id)\n    this.room_id = this.iroom_id && this.iroom_id\n\n    this.getConnectedMembers()\n    this.getRooms()\n  },\n  methods: {\n    getConnectedMembers() {\n      const url = 'filter[status]=accepted&include=profile'\n      this.$membership.getAllMembers(url).then(data => {\n        console.log(data)\n        this.members = _.map(data, o => {\n          return {\n            text: `${o.first_name} ${o.last_name}`,\n            value: o.uuid\n          }\n        })\n      })\n    },\n    getRooms() {\n      this.$resource.getAllRooms().then(({ data }) => {\n        this.rooms = _.map(data.data, o => {\n          return {\n            text: o.name,\n            value: o.id\n          }\n        })\n        // this.room_id = this.rooms[0].value\n      })\n    },\n    changeDate(e) {\n      this.to = this.$moment(e)\n        .add(1, 'hour')\n        .format('YYYY-MM-DD HH:mm')\n    },\n    submitDetails() {\n      const { from, to, title, membership_id, room_id } = this\n\n      this.$emit('details', {\n        from,\n        to,\n        title,\n        membership_id,\n        room_id\n      })\n    },\n    cancelBooking() {\n      this.$emit('deleteBooking')\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n","// Exports\nmodule.exports = {};\n","import mod from \"-!../../../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-0!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-0!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.submitDetails($event)}}},[_c('b-row',[_c('b-form-group',{staticClass:\"col-md-12\",attrs:{\"label\":\"Member\"}},[_c('b-form-select',{attrs:{\"options\":_vm.members,\"value\":_vm.membership_id,\"required\":\"\"},model:{value:(_vm.membership_id),callback:function ($$v) {_vm.membership_id=$$v},expression:\"membership_id\"}})],1)],1),_vm._v(\" \"),_c('b-row',[_c('b-form-group',{staticClass:\"col-md-12\",attrs:{\"label\":\"Room\"}},[_c('b-form-select',{attrs:{\"options\":_vm.rooms,\"value\":_vm.room_id,\"required\":\"\"},model:{value:(_vm.room_id),callback:function ($$v) {_vm.room_id=$$v},expression:\"room_id\"}})],1)],1),_vm._v(\" \"),_c('b-row',[_c('b-form-group',{staticClass:\"col-md-6\",attrs:{\"label\":\"From\"}},[_c('client-only',[_c('date-picker',{attrs:{\"id\":\"time\",\"time-picker-options\":_vm.timePickerOptions,\"disabled-days\":_vm.disableddates,\"width\":\"100%\",\"input-class\":\"form-control\",\"lang\":\"en\",\"format\":\"YYYY-MM-DD HH:mm\",\"value-type\":\"format\",\"confirm\":\"\",\"type\":\"datetime\"},on:{\"change\":_vm.changeDate},model:{value:(_vm.from),callback:function ($$v) {_vm.from=$$v},expression:\"from\"}})],1)],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-6\",attrs:{\"label\":\"To\"}},[_c('client-only',[_c('date-picker',{attrs:{\"id\":\"time\",\"time-picker-options\":_vm.timePickerOptions,\"disabled-days\":_vm.disableddates,\"width\":\"100%\",\"input-class\":\"form-control\",\"lang\":\"en\",\"format\":\"YYYY-MM-DD HH:mm\",\"value-type\":\"format\",\"confirm\":\"\",\"type\":\"datetime\"},model:{value:(_vm.to),callback:function ($$v) {_vm.to=$$v},expression:\"to\"}})],1)],1)],1),_vm._v(\" \"),_c('b-row',[_c('b-form-group',{staticClass:\"col-md-12\",attrs:{\"label\":\"Title\"}},[_c('b-form-input',{attrs:{\"placeholder\":\"Reason for booking\",\"required\":\"\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1)],1),_vm._v(\" \"),_c('b-row',[_c('b-form-group',{staticClass:\"col-md-12\"},[_c('b-button',{attrs:{\"type\":\"submit\",\"variant\":\"primary\"}},[_vm._v(\"Save\")]),_vm._v(\" \"),_c('b-button',{staticClass:\"float-right\",attrs:{\"type\":\"button\",\"variant\":\"default\"},on:{\"click\":_vm.cancelBooking}},[_vm._v(\"Cancel Booking\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Modal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Modal.vue?vue&type=template&id=09dae890&\"\nimport script from \"./Modal.vue?vue&type=script&lang=js&\"\nexport * from \"./Modal.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"2a64e460\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('base-header',{staticClass:\"pb-6\",attrs:{\"type\":\"\"}},[_c('div',{staticClass:\"d-flex justify-content-between align-items-center py-4\"},[_c('MainTitle',{attrs:{\"title\":\"Bookings\",\"subtitle\":\"Calendar\"}}),_vm._v(\" \"),_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.new-booking-modal\",modifiers:{\"new-booking-modal\":true}}],attrs:{\"id\":\"modal-btn\",\"variant\":\"primary\"}},[_vm._v(\"Add New Booking\")])],1)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"container-fluid mt--6\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-deck flex-column flex-xl-row\\\">\",\"</div>\",[_c('card',[(_vm.showmodal)?_c('b-modal',{attrs:{\"id\":\"booking-modal\",\"title\":_vm.modalText,\"hide-footer\":\"\"}},[_c('booking-modal',{attrs:{\"ifrom\":_vm.bookdata.from,\"ito\":_vm.bookdata.to,\"ititle\":_vm.bookdata.title,\"imembership_id\":_vm.bookdata.membership_id,\"iroom_id\":_vm.bookdata.room_id,\"disableddates\":_vm.disabledates},on:{\"details\":_vm.submitBooking,\"deleteBooking\":_vm.cancelBook}})],1):_vm._e(),_vm._v(\" \"),_c('b-modal',{attrs:{\"id\":\"new-booking-modal\",\"hide-footer\":\"\",\"title\":\"Add New Booking\"}},[_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.addBooking($event)}}},[_c('b-row',[_c('b-form-group',{staticClass:\"col-md-12\",attrs:{\"label\":\"Member\"}},[_c('el-select',{attrs:{\"remote-method\":_vm.searchMembers,\"loading\":_vm.loading,\"required\":\"\",\"filterable\":\"\",\"remote\":\"\",\"reserve-keyword\":\"\",\"placeholder\":\"Choose a member\"},on:{\"change\":_vm.valueChange},model:{value:(_vm.newBooking.membership_id),callback:function ($$v) {_vm.$set(_vm.newBooking, \"membership_id\", $$v)},expression:\"newBooking.membership_id\"}},_vm._l((_vm.data),function(option){return _c('el-option',{key:option.id,attrs:{\"label\":option.first_name + ' ' + option.last_name,\"value\":option.id}})}),1)],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-12\",attrs:{\"label\":\"Resource to book\"}},[_c('el-select',{attrs:{\"remote-method\":_vm.searchResource,\"loading\":_vm.searching,\"required\":\"\",\"filterable\":\"\",\"remote\":\"\",\"reserve-keyword\":\"\",\"placeholder\":\"Choose a resource\"},model:{value:(_vm.newBooking.room_id),callback:function ($$v) {_vm.$set(_vm.newBooking, \"room_id\", $$v)},expression:\"newBooking.room_id\"}},_vm._l((_vm.allRooms),function(option){return _c('el-option',{key:option.id,attrs:{\"label\":option.name,\"value\":option.id}})}),1)],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-12\",attrs:{\"label\":\"Choose payment type\"}},[_c('el-select',{attrs:{\"disabled\":!_vm.newBooking.membership_id,\"required\":\"\",\"placeholder\":\"Choose payment type\"},on:{\"change\":_vm.getPaymentMethods},model:{value:(_vm.newBooking.source),callback:function ($$v) {_vm.$set(_vm.newBooking, \"source\", $$v)},expression:\"newBooking.source\"}},_vm._l((_vm.paymenttype),function(option){return _c('el-option',{key:option.id,attrs:{\"label\":option.name,\"value\":option.name}})}),1)],1),_vm._v(\" \"),(_vm.newBooking.source == 'card')?_c('b-form-group',{staticClass:\"col-md-12\",attrs:{\"label\":\"Choose card\"}},[_c('el-select',{attrs:{\"required\":\"\",\"placeholder\":\"Choose card\"},model:{value:(_vm.newBooking.payment_method),callback:function ($$v) {_vm.$set(_vm.newBooking, \"payment_method\", $$v)},expression:\"newBooking.payment_method\"}},_vm._l((_vm.payCards),function(option){return _c('el-option',{key:option.id,attrs:{\"label\":option.card_brand + ' xxxx-xxxx-xxxx-' + option.last_4,\"value\":option.id}})}),1)],1):_vm._e(),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-6\",attrs:{\"label\":\"From\"}},[_c('client-only',[_c('date-picker',{attrs:{\"id\":\"time\",\"time-picker-options\":_vm.timePickerOptions,\"not-before\":_vm.not_before,\"disabled-days\":_vm.disabledates,\"width\":\"100%\",\"input-class\":\"form-control\",\"lang\":\"en\",\"format\":\"YYYY-MM-DD HH:mm\",\"value-type\":\"format\",\"confirm\":\"\",\"type\":\"time\"},model:{value:(_vm.newBooking.from),callback:function ($$v) {_vm.$set(_vm.newBooking, \"from\", $$v)},expression:\"newBooking.from\"}})],1)],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-6\",attrs:{\"label\":\"To\"}},[_c('client-only',[_c('date-picker',{attrs:{\"id\":\"time\",\"time-picker-options\":_vm.timePickerOptions,\"not-before\":_vm.not_before,\"disabled-days\":_vm.disabledates,\"width\":\"100%\",\"input-class\":\"form-control\",\"lang\":\"en\",\"format\":\"YYYY-MM-DD HH:mm\",\"value-type\":\"format\",\"confirm\":\"\",\"type\":\"time\"},model:{value:(_vm.newBooking.to),callback:function ($$v) {_vm.$set(_vm.newBooking, \"to\", $$v)},expression:\"newBooking.to\"}})],1)],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"col-md-12\",attrs:{\"label\":\"Title for Booking\"}},[_c('b-form-input',{attrs:{\"type\":\"text\",\"placeholder\":\"Title for booking\",\"required\":\"\"},model:{value:(_vm.newBooking.title),callback:function ($$v) {_vm.$set(_vm.newBooking, \"title\", $$v)},expression:\"newBooking.title\"}})],1)],1),_vm._v(\" \"),_c('b-button',{attrs:{\"disabled\":_vm.processing,\"type\":\"submit\",\"variant\":\"primary\"}},[_vm._v(\"Book\")])],1)],1),_vm._v(\" \"),_c('client-only',[_c('full-calendar',{attrs:{\"events\":_vm.bookings,\"views\":_vm.views,\"resources\":_vm.fetchResources,\"right\":_vm.calendarPlugin,\"default-view\":'resourceTimelineDay'},on:{\"eventClick\":_vm.eventClick,\"dateClick\":_vm.bookDate,\"dateChange\":_vm.dateChange,\"viewSwitched\":_vm.viewSwitched}})],1)],1)],1)])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1b85ad3e&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.vue?vue&type=style&index=0&lang=css&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"1a30fbe3\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',{staticClass:\"page-title\"},[_vm._ssrNode(\"<span>\"+_vm._ssrEscape(_vm._s(_vm.title))+\"</span> <b\"+(_vm._ssrStyle(null,null, { display: (_vm.subtitle) ? '' : 'none' }))+\">•</b>\"+_vm._ssrEscape(\" \"+_vm._s(_vm.subtitle)))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <h1 class=\"page-title\"><span>{{ title }}</span> <b v-show=\"subtitle\">•</b> {{ subtitle }}</h1>\n</template>\n\n<script>\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    subtitle: {\n      type: String,\n      default: ''\n    },\n    info: {\n      type: String,\n      default: ''\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainTitle.vue?vue&type=template&id=eb42120a&\"\nimport script from \"./MainTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./MainTitle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"2927529c\"\n  \n)\n\nexport default component.exports","// Exports\nmodule.exports = {};\n","// Exports\nmodule.exports = {};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0MA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AACA;AACA;AAHA;AAKA;AAEA;AACA;AACA;AACA;AADA;AADA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAzCA;AA2CA;AACA;AAAA;AAEA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAJA;AACA;AAKA;AACA;AACA;AACA;AAfA;AACA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAKA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAGA;AACA;AACA;AAFA;AAKA;AACA;AAEA;AACA;AAMA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;AACA;AAGA;AACA;AACA;AAHA;AAMA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAEA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAzJA;AA5FA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClHA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AArBA;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AARA;AACA;AAaA;AACA;AAGA;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AAAA;AACA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AAAA;AACA;AACA;AACA;AA3CA;AA1DA;;;;;;;;AClGA;AACA;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;ACAA;AACA;AACA;;;;;;;;ACFA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrBA;AACA;AACA;;;;;;;;ACFA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACvBA;AACA;AACA;;;;;;;;;ACGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AATA;AADA;;ACLA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClBA;AACA;;;;;;;;ACDA;AACA;;;;;A","sourceRoot":""}