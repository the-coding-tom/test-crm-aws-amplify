{"version":3,"file":"pages/_space/events/_id/attendees.js","sources":["webpack:///./util/errors.js","webpack:///./components/shack/SearchForm.vue?8e00","webpack:///SearchForm.vue","webpack:///./components/shack/SearchForm.vue?afe0","webpack:///./components/shack/SearchForm.vue","webpack:///MultiUploadButton.vue","webpack:///./components/shack/MultiUploadButton.vue?4f62","webpack:///./components/shack/MultiUploadButton.vue?e4c9","webpack:///./pages/_space/events/_id/attendees.vue?ef94","webpack:///./components/shack/AppreciationModal.vue?a1b4","webpack:///./components/shack/MultiUploadButton.vue?6c47","webpack:///./components/shack/MultiUploadButton.vue?0251","webpack:///./components/shack/MultiUploadButton.vue","webpack:///AppreciationModal.vue","webpack:///./components/shack/AppreciationModal.vue?180f","webpack:///./components/shack/AppreciationModal.vue","webpack:///attendees.vue","webpack:///./pages/_space/events/_id/attendees.vue?9999","webpack:///./pages/_space/events/_id/attendees.vue","webpack:///./components/shack/MainTitle.vue?4b3c","webpack:///MainTitle.vue","webpack:///./components/shack/MainTitle.vue?cbd3","webpack:///./components/shack/MainTitle.vue","webpack:///./components/shack/SectionTitle.vue?33b7","webpack:///SectionTitle.vue","webpack:///./components/shack/SectionTitle.vue?3821","webpack:///./components/shack/SectionTitle.vue","webpack:///./node_modules/element-ui/lib/theme-chalk/option.css","webpack:///./node_modules/element-ui/lib/theme-chalk/select.css"],"sourcesContent":["export const displayError = function(e, vm = null) {\n  if (e.response) {\n    processError(e.response.data.message, vm)\n\n    if (e.response.data.errors) {\n      _.each(e.response.data.errors, (o, i) => {\n        return _.each(o, (v, k) => processError(v, vm))\n      })\n    }\n\n    return\n  }\n\n  processError(e.message, vm)\n}\n\nconst processError = function(message, vm) {\n  console.log('------------------------------------')\n  console.log(message)\n  console.log('------------------------------------')\n  vm && vm.$bvToast.toast(message, { title: 'Error', variant: 'danger' })\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.search($event)}}},[_c('base-input',{staticClass:\"mb-0\",attrs:{\"input-group-classes\":\"input-group-merge sh-search\",\"group\":\"\"}},[_c('template',{slot:\"prepend\"},[_c('i',{staticClass:\"fa fa-search\"})]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchTerm),expression:\"searchTerm\"}],staticClass:\"form-control\",attrs:{\"required\":_vm.required,\"type\":\"text\",\"placeholder\":\"Looking for ...\",\"aria-describedby\":\"button-addon2\"},domProps:{\"value\":(_vm.searchTerm)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.searchTerm=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-default\",attrs:{\"id\":\"button-addon2\",\"disabled\":_vm.loading,\"type\":\"submit\"}},[(_vm.loading)?_c('i',{staticClass:\"fa fa-spinner fa-spin\"}):_c('span',[_vm._v(\"\\n            Search\")])])])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-form @submit.prevent=\"search\">\n    <base-input\n      input-group-classes=\"input-group-merge sh-search\"\n      group\n      class=\"mb-0\"\n    >\n      <template slot=\"prepend\"><i class=\"fa fa-search\" /></template>\n      <input\n        v-model=\"searchTerm\"\n        :required=\"required\"\n        type=\"text\"\n        class=\"form-control\"\n        placeholder=\"Looking for ...\"\n        aria-describedby=\"button-addon2\"\n      >\n      <div class=\"input-group-append\">\n        <button\n          id=\"button-addon2\"\n          :disabled=\"loading\"\n          class=\"btn btn-default\"\n          type=\"submit\"\n        >\n          <i \n            v-if=\"loading\" \n            class=\"fa fa-spinner fa-spin\" /><span v-else>\n              Search</span\n              >\n        </button>\n      </div>\n    </base-input>\n  </b-form>\n</template>\n\n<script>\nexport default {\n  props: {\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    required: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: () => ({\n    searchTerm: ''\n  }),\n  methods: {\n    search() {\n      this.$emit('input', this.searchTerm)\n\n      this.$emit('search', this.searchTerm)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchForm.vue?vue&type=template&id=feea539e&\"\nimport script from \"./SearchForm.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"6ddf3cf7\"\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <div\n      id=\"preview\"\n      class=\"mr-b-20\">\n      <img\n        v-for=\"u in url\"\n        v-if=\"u\"\n        :key=\"u.id\"\n        :src=\"u\" >\n    </div>\n    <div class=\"bg-lgray pd-10 pd-l-20 upload-btn-wrapper pd-0\">\n      <button class=\"btn\"><i class=\"fa fa-paperclip mr-r-10\"/> {{ label }}</button>\n      <input\n        :name=\"name\"\n        type=\"file\"\n        accept=\"image/*\"\n        multiple\n        @change=\"onFileChange\" >\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  props: {\n    name: {\n      type: String,\n      default: null\n    },\n    label: {\n      type: String,\n      default: null\n    },\n    service: {\n      type: String,\n      default: 'images'\n    },\n    url: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      publicUrl: null,\n      images: []\n    }\n  },\n  methods: {\n    async onFileChange(e) {\n      const files = e.target.files\n\n      if (!files) {\n        return\n      }\n\n      for (var i = 0; i < files.length; i++) {\n        if (files[i].size > 500000) {\n          this.$bvToast.toast('Each file size must not be greater than 500kb', {\n            variant: 'warning'\n          })\n          return\n        }\n\n        var file = files[i]\n\n        let mime = file.type\n        this.url.push(URL.createObjectURL(file))\n\n        let upload = await this.getSignedUrl(mime)\n        this.publicUrl = upload.public_url\n\n        this.$bvToast.toast('Uploading image. Please wait...')\n\n        //upload image here\n        let uploadUrl = await this.uploadUrl(upload.signed_url, file, mime)\n          .then(res => {\n            this.images.push(this.publicUrl)\n            this.$emit('input', this.images)\n\n            this.$bvToast.toast('Image uploaded successfully', {\n              variant: 'success',\n              solid: true\n            })\n          })\n          .catch(e => {\n            this.$bvToast.toast(e.message, {\n              title: 'Error',\n              variant: 'danger',\n              solid: true\n            })\n          })\n      }\n    },\n    getSignedUrl(mime) {\n      const { service } = this\n\n      return this.$images\n        .getSignedUrl(service, mime)\n        .then(({ data }) => {\n          return data.data\n        })\n        .catch(({ response }) => {\n          this.$bvToast.toast(JSON.stringify(response.data.errors), {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n        })\n    },\n    uploadUrl(url, file, mime) {\n      return axios\n        .put(url, file, {\n          headers: {\n            'Content-Type': mime\n          }\n        })\n        .then(res => {\n          return res\n        })\n        .catch(({ response }) => {\n          this.$bvToast.toast(JSON.stringify(response.data), {\n            variant: 'danger',\n            solid: true\n          })\n        })\n    }\n  }\n}\n</script>\n<style>\n#preview {\n}\n\n#preview img {\n  max-width: 200px;\n  margin-right: 30px;\n}\n</style>\n","// Exports\nmodule.exports = {};\n","import mod from \"-!../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-0!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MultiUploadButton.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-0!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MultiUploadButton.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('base-header',{staticClass:\"pb-6\",attrs:{\"type\":\"\"}},[_c('div',{staticClass:\"d-flex justify-content-between align-items-center py-4\"},[_c('MainTitle',{attrs:{\"title\":\"Attendees\"}}),_vm._v(\" \"),_c('SearchForm',{attrs:{\"loading\":_vm.loading,\"required\":false},on:{\"search\":_vm.searchAttendees}}),_vm._v(\" \"),_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.appreciation\",modifiers:{\"appreciation\":true}}],attrs:{\"variant\":\"primary\"}},[_vm._v(\"Send Appreciation\")])],1)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"container-fluid mt--6\\\" data-v-df3e947a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\" data-v-df3e947a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col\\\" data-v-df3e947a>\",\"</div>\",[_c('card',[_c('b-row',[_c('div',{staticClass:\"form-group col-md-3\"},[_c('label',[_vm._v(\"Add new Attendee\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"Select Member\",\"filterable\":\"\"},model:{value:(_vm.attendee),callback:function ($$v) {_vm.attendee=$$v},expression:\"attendee\"}},_vm._l((_vm.memberships),function(member){return _c('el-option',{key:member.id,attrs:{\"label\":member.first_name + ' ' + member.last_name,\"value\":member.id}})}),1)],1),_vm._v(\" \"),(_vm.attendee)?_c('div',{staticClass:\"form-group col-md-2\"},[_c('label',{attrs:{\"for\":\"source\"}},[_vm._v(\"Payment Source\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"Choose a source\"},on:{\"change\":_vm.getCards},model:{value:(_vm.source),callback:function ($$v) {_vm.source=$$v},expression:\"source\"}},_vm._l((_vm.sources),function(source){return _c('el-option',{key:source.text,attrs:{\"label\":source.value,\"value\":source.value}})}),1)],1):_vm._e(),_vm._v(\" \"),(_vm.source === 'card')?_c('div',{staticClass:\"form-group col-md-2\"},[_c('label',[_vm._v(\"Payment Method\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"Choose a card\"},model:{value:(_vm.payment_method),callback:function ($$v) {_vm.payment_method=$$v},expression:\"payment_method\"}},_vm._l((_vm.cards),function(card){return _c('el-option',{key:card.id,attrs:{\"label\":((card.card_brand) + \" ~ **** \" + (card.last_4)),\"value\":card.id}})}),1)],1):_vm._e(),_vm._v(\" \"),_c('base-input',{staticClass:\"col-md-1\",attrs:{\"label\":\"Tickets\",\"placeholder\":\"Enter number of tickets\",\"type\":\"number\",\"min\":\"1\"},model:{value:(_vm.tickets),callback:function ($$v) {_vm.tickets=$$v},expression:\"tickets\"}}),_vm._v(\" \"),_c('div',{staticClass:\"form-group col-md-3\"},[_c('label',[_vm._v(\" \")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('b-button',{staticClass:\"sh-dashbtn\",attrs:{\"disabled\":_vm.loading,\"type\":\"submit\",\"outline\":\"\"},on:{\"click\":_vm.adminPurchaseTicket}},[_vm._v(\"Add To Attendee List\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"mr-tb-80\"},[_c('div',{staticClass:\"m-n25\"},[_c('table',{staticClass:\"table table-hover table-striped sh-border-head\"},[_c('thead',[_c('tr',[_c('th',[_vm._v(\"Attendee Name\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Number of Tickets\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Action\")])])]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.attendees.filter(\n                      function (item) { return item.membership != null; }\n                    )),function(attendee,i){return _c('tr',{key:i},[_c('td',[_vm._v(\"\\n                      \"+_vm._s(attendee.membership.first_name +\n                          ' ' +\n                          attendee.membership.last_name)+\"\\n                    \")]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(attendee.number_of_tickets))]),_vm._v(\" \"),_c('td',[_c('b-button',{attrs:{\"disabled\":attendee.membership.last_checkin[0] &&\n                            attendee.membership.last_checkin[0].status ===\n                            'checkin',\"variant\":\"info\"},on:{\"click\":function($event){return _vm.checkinToggle(attendee)}}},[_c('i',{staticClass:\"fas fa-check-square\"}),_vm._v(\" \"),_c('span',[_vm._v(\"Checkin\")])]),_vm._v(\" \"),_c('b-button',{staticClass:\"text-danger\",attrs:{\"disabled\":_vm.loading,\"type\":\"submit\",\"variant\":\"transparent\"},on:{\"click\":function($event){return _vm.removeTicket(i, attendee)}}},[_c('i',{staticClass:\"fa fa-times\"}),_vm._v(\" Cancel\\n                      \")])],1)])}),0)])])]),_vm._v(\" \"),_c('div',[_c('base-pagination',{attrs:{\"total\":_vm.meta.total,\"per-page\":_vm.meta.per_page,\"value\":_vm.meta.current_page,\"align\":\"center\"},on:{\"next\":_vm.next,\"prev\":_vm.prev}})],1)],1)],1)]),_vm._ssrNode(\" \"),_c('appreciation-modal')],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-modal',{attrs:{\"id\":\"appreciation\",\"title\":\"Send Appreciation Email to Attendees\",\"hide-footer\":\"\"}},[_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.sendAppreciation($event)}}},[_c('b-form-group',{attrs:{\"description\":\"Images will be attached to the email sent out to attendees\"}},[_c('MultiUploadButton',{attrs:{\"service\":\"event\",\"label\":\"Upload Images (<500KB)\"},model:{value:(_vm.images),callback:function ($$v) {_vm.images=$$v},expression:\"images\"}})],1),_vm._v(\" \"),_c('b-button',{attrs:{\"type\":\"submit\"}},[_vm._v(\"Send\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<div id=\\\"preview\\\" class=\\\"mr-b-20\\\">\"+(_vm._ssrList((_vm.url),function(u){return (((u)?(\"<img\"+(_vm._ssrAttr(\"src\",u))+\">\"):\"<!---->\"))}))+\"</div> <div class=\\\"bg-lgray pd-10 pd-l-20 upload-btn-wrapper pd-0\\\"><button class=\\\"btn\\\"><i class=\\\"fa fa-paperclip mr-r-10\\\"></i>\"+_vm._ssrEscape(\" \"+_vm._s(_vm.label))+\"</button> <input\"+(_vm._ssrAttr(\"name\",_vm.name))+\" type=\\\"file\\\" accept=\\\"image/*\\\" multiple=\\\"multiple\\\"></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MultiUploadButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MultiUploadButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MultiUploadButton.vue?vue&type=template&id=31c5e5e0&\"\nimport script from \"./MultiUploadButton.vue?vue&type=script&lang=js&\"\nexport * from \"./MultiUploadButton.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./MultiUploadButton.vue?vue&type=style&index=0&lang=css&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"4a1c13d1\"\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <b-modal\n      id=\"appreciation\"\n      title=\"Send Appreciation Email to Attendees\"\n      hide-footer\n    >\n      <b-form @submit.prevent=\"sendAppreciation\" >\n        <b-form-group description=\"Images will be attached to the email sent out to attendees\">\n          <MultiUploadButton\n            v-model=\"images\"\n            service=\"event\"\n            label=\"Upload Images (<500KB)\"\n          />\n        </b-form-group>\n        <b-button type=\"submit\">Send</b-button>\n      </b-form>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport MultiUploadButton from '@/components/shack/MultiUploadButton.vue'\nimport { displayError } from '@/util/errors'\n\nexport default {\n  name: 'AppreciationModal',\n  components: {\n    MultiUploadButton\n  },\n  data: () => ({\n    images: []\n  }),\n  methods: {\n    sendAppreciation() {\n      if (this.images.length < 2) {\n        this.$bvToast.toast('At least two images are required', {\n          title: 'Error',\n          variant: 'danger',\n          solid: true\n        })\n      }\n\n      this.$event\n        .sendAppreciation(this.$route.params.id, { images: this.images })\n        .then(res => {\n          this.$bvToast.toast('Email sent successfully', {\n            title: 'Success',\n            variant: 'success',\n            solid: true\n          })\n\n          this.$bvModal.hide('appreciation')\n        })\n        .catch(e => {\n          displayError(e, this)\n        })\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppreciationModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppreciationModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppreciationModal.vue?vue&type=template&id=28902797&\"\nimport script from \"./AppreciationModal.vue?vue&type=script&lang=js&\"\nexport * from \"./AppreciationModal.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"742cb417\"\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <base-header \n      class=\"pb-6\" \n      type>\n      <div class=\"d-flex justify-content-between align-items-center py-4\">\n        <MainTitle title=\"Attendees\" />\n        <SearchForm\n          :loading=\"loading\"\n          :required=\"false\"\n          @search=\"searchAttendees\"\n        />\n        <b-button \n          v-b-modal.appreciation \n          variant=\"primary\"\n        >Send Appreciation</b-button\n        >\n      </div>\n    </base-header>\n\n    <div class=\"container-fluid mt--6\">\n      <div class=\"row\">\n        <div class=\"col\">\n          <card>\n            <b-row>\n              <div class=\"form-group col-md-3\">\n                <label>Add new Attendee</label>\n                <el-select\n                  v-model=\"attendee\"\n                  placeholder=\"Select Member\"\n                  filterable\n                >\n                  <el-option\n                    v-for=\"member in memberships\"\n                    :key=\"member.id\"\n                    :label=\"member.first_name + ' ' + member.last_name\"\n                    :value=\"member.id\"\n                  />\n                </el-select>\n              </div>\n              <div \n                v-if=\"attendee\" \n                class=\"form-group col-md-2\">\n                <label for=\"source\">Payment Source</label>\n                <el-select\n                  v-model=\"source\"\n                  placeholder=\"Choose a source\"\n                  @change=\"getCards\"\n                >\n                  <el-option\n                    v-for=\"source in sources\"\n                    :key=\"source.text\"\n                    :label=\"source.value\"\n                    :value=\"source.value\"\n                  />\n                </el-select>\n              </div>\n              <div \n                v-if=\"source === 'card'\" \n                class=\"form-group col-md-2\">\n                <label>Payment Method</label>\n                <el-select \n                  v-model=\"payment_method\" \n                  placeholder=\"Choose a card\">\n                  <el-option\n                    v-for=\"card in cards\"\n                    :key=\"card.id\"\n                    :label=\"`${card.card_brand} ~ **** ${card.last_4}`\"\n                    :value=\"card.id\"\n                  />\n                </el-select>\n              </div>\n              <base-input\n                v-model=\"tickets\"\n                class=\"col-md-1\"\n                label=\"Tickets\"\n                placeholder=\"Enter number of tickets\"\n                type=\"number\"\n                min=\"1\"\n              />\n              <div class=\"form-group col-md-3\">\n                <label>&nbsp;</label>\n                <br >\n                <b-button\n                  :disabled=\"loading\"\n                  type=\"submit\"\n                  outline\n                  class=\"sh-dashbtn\"\n                  @click=\"adminPurchaseTicket\"\n                >Add To Attendee List</b-button\n                >\n              </div>\n            </b-row>\n\n            <div class=\"mr-tb-80\">\n              <div class=\"m-n25\">\n                <table class=\"table table-hover table-striped sh-border-head\">\n                  <thead>\n                    <tr>\n                      <th>Attendee Name</th>\n                      <th>Number of Tickets</th>\n                      <th>Action</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr\n                      v-for=\"(attendee, i) in attendees.filter(\n                        (item) => item.membership != null\n                      )\"\n                      :key=\"i\"\n                    >\n                      <td>\n                        {{\n                          attendee.membership.first_name +\n                            ' ' +\n                            attendee.membership.last_name\n                        }}\n                      </td>\n                      <td>{{ attendee.number_of_tickets }}</td>\n                      <td>\n                        <b-button\n                          :disabled=\"\n                            attendee.membership.last_checkin[0] &&\n                              attendee.membership.last_checkin[0].status ===\n                              'checkin'\n                          \"\n                          variant=\"info\"\n                          @click=\"checkinToggle(attendee)\"\n                        >\n                          <i class=\"fas fa-check-square\" />\n                          <span>Checkin</span>\n                        </b-button>\n                        <b-button\n                          :disabled=\"loading\"\n                          type=\"submit\"\n                          variant=\"transparent\"\n                          class=\"text-danger\"\n                          @click=\"removeTicket(i, attendee)\"\n                        >\n                          <i class=\"fa fa-times\" /> Cancel\n                        </b-button>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            <div>\n              <base-pagination\n                :total=\"meta.total\"\n                :per-page=\"meta.per_page\"\n                :value=\"meta.current_page\"\n                align=\"center\"\n                @next=\"next\"\n                @prev=\"prev\"\n              />\n            </div>\n          </card>\n        </div>\n      </div>\n\n      <appreciation-modal />\n    </div>\n  </div>\n</template>\n<script>\n// Components\nimport BaseHeader from '@/components/argon-core/BaseHeader'\nimport MainTitle from '@/components/shack/MainTitle.vue'\nimport SectionTitle from '@/components/shack/SectionTitle.vue'\nimport { Select, Option } from 'element-ui'\nimport SearchForm from '~/components/shack/SearchForm.vue'\nimport AppreciationModal from '~/components/shack/AppreciationModal'\n\nimport { mapState } from 'vuex'\n\nexport default {\n  layout: 'ShackDash',\n  components: {\n    BaseHeader,\n    MainTitle,\n    SectionTitle,\n    SearchForm,\n    [Select.name]: Select,\n    [Option.name]: Option,\n    AppreciationModal\n  },\n  async asyncData({ store, $event, error, params }) {\n    const { id } = params\n\n    await $event\n      .getAttendees(id)\n      .then(({ data }) => {\n        store.commit('events/setAttendees', data)\n      })\n      .catch(err => {\n        error({ statusCode: 404, message: 'A problem occurred. Try Again...' })\n      })\n\n    await $event\n      .getMemberships()\n      .then(({ data }) => {\n        store.commit('events/setMemberships', data)\n      })\n      .catch(err => {\n        error({ statusCode: 404, message: 'A problem occurred. Try Again...' })\n      })\n\n    return {\n      id\n    }\n  },\n  data() {\n    return {\n      tickets: 1,\n      loading: false,\n      attendee: '',\n      payment_method: '',\n      cards: [],\n      source: '',\n      sources: [\n        { text: 'Card', value: 'card' },\n        { text: 'Credit', value: 'credit' }\n      ]\n    }\n  },\n  computed: {\n    ...mapState({\n      attendees: state => state.events.attendees.data,\n      meta: state => state.events.attendees.meta,\n      links: state => state.events.attendees.links,\n      memberships: state => state.events.memberships.data\n    })\n  },\n  methods: {\n    next() {\n      const { next } = this.links\n      this.$events.getAttendees(null, next)\n    },\n    prev() {\n      const { prev } = this.links\n      this.$events.getAttendees(null, prev)\n    },\n    getCards(source) {\n      if (source !== 'card') return\n\n      const id = this.attendee\n\n      this.$membership\n        .getPaymentMethods(id)\n        .then(({ data }) => {\n          this.cards = data\n          this.payment_method = data[0].id\n        })\n        .catch(e => {\n          const message = e.response\n            ? e.response.data.message +\n              ' ' +\n              JSON.stringify(error.response.data.errors)\n            : e.message\n          this.$bvToast.toast(message, {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n        })\n    },\n    adminPurchaseTicket() {\n      this.loading = true\n\n      const payload = {\n        number_of_tickets: this.tickets,\n        membership_id: this.attendee,\n        payment_method: this.payment_method,\n        source: this.source\n      }\n\n      this.$event\n        .purchaseTicketByAdmin(this.id, payload)\n        .then(({ data: { data } }) => {\n          this.$bvToast.toast('Added New Attendee', {\n            title: 'Success',\n            variant: 'success',\n            solid: true\n          })\n          this.$store.commit('events/addAttendee', data)\n        })\n        .catch(error => {\n          const message = error.response\n            ? error.response.data.message +\n              ' ~ ' +\n              JSON.stringify(error.response.data.errors)\n            : error.message\n          this.$bvToast.toast(message, {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n        })\n    },\n    removeTicket(index, payload) {\n      const ticket = {\n        ticket_id: payload.id,\n        membership_id: payload.membership.id\n      }\n\n      this.loading = !this.loading\n\n      this.$event\n        .cancelTicket(this.id, { data: ticket })\n        .then(({ data }) => {\n          this.$bvToast.toast('Successfully cancelled ticket', {\n            title: 'Success',\n            variant: 'success',\n            solid: true\n          })\n\n          this.loading = !this.loading\n\n          this.$store.commit('events/removeAttendee', index)\n        })\n        .catch(({ response }) => {\n          this.loading = !this.loading\n          this.$bvToast.toast(JSON.stringify(response.data.errors), {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n        })\n    },\n    checkinToggle(e) {\n      this.$checkin\n        .checkin({\n          type: 'member',\n          membership_id: e.membership.id\n        })\n        .then(({ data }) => {\n          this.$bvToast.toast('Member checked in successfully', {\n            title: 'Success',\n            variant: 'success'\n          })\n\n          location.reload()\n        })\n        .catch(e => {\n          this.$bvToast.toast('Member checkin failed', {\n            title: 'Error',\n            variant: 'danger'\n          })\n        })\n    },\n    searchAttendees(term) {\n      const { id } = this.$route.params\n      this.$event\n        .searchAttendees(id, term)\n        .then(data => {\n          this.$store.commit('events/setAttendees', data)\n        })\n        .catch(e => {\n          this.$bvToast.toast(JSON.stringify(e.response.data.errors), {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n        })\n    }\n  }\n}\n</script>\n<style>\n</style>\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./attendees.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./attendees.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./attendees.vue?vue&type=template&id=df3e947a&scoped=true&\"\nimport script from \"./attendees.vue?vue&type=script&lang=js&\"\nexport * from \"./attendees.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"df3e947a\",\n  \"4e4d16fc\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',{staticClass:\"page-title\"},[_vm._ssrNode(\"<span>\"+_vm._ssrEscape(_vm._s(_vm.title))+\"</span> <b\"+(_vm._ssrStyle(null,null, { display: (_vm.subtitle) ? '' : 'none' }))+\">•</b>\"+_vm._ssrEscape(\" \"+_vm._s(_vm.subtitle)))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <h1 class=\"page-title\"><span>{{ title }}</span> <b v-show=\"subtitle\">•</b> {{ subtitle }}</h1>\n</template>\n\n<script>\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    subtitle: {\n      type: String,\n      default: ''\n    },\n    info: {\n      type: String,\n      default: ''\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainTitle.vue?vue&type=template&id=eb42120a&\"\nimport script from \"./MainTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./MainTitle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"bd5e01f8\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h3',{staticClass:\"page-title\"},[_vm._ssrNode(\"<span>\"+_vm._ssrEscape(_vm._s(_vm.title))+\"</span> <b\"+(_vm._ssrStyle(null,null, { display: (_vm.subtitle) ? '' : 'none' }))+\">•</b>\"+_vm._ssrEscape(\" \"+_vm._s(_vm.subtitle)))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <h3 class=\"page-title\"><span>{{ title }}</span> <b v-show=\"subtitle\">•</b> {{ subtitle }}</h3>\n</template>\n\n<script>\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    subtitle: {\n      type: String,\n      default: null\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SectionTitle.vue?vue&type=template&id=b54cd52a&\"\nimport script from \"./SectionTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./SectionTitle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"1090309e\"\n  \n)\n\nexport default component.exports","// Exports\nmodule.exports = {};\n","// Exports\nmodule.exports = {};\n"],"mappings":";;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;ACrBA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiCA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AALA;AAUA;AACA;AADA;AAGA;AACA;AACA;AAEA;AACA;AACA;AANA;AAdA;;ACnCA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACMA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAbA;AACA;AAiBA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AAEA;AACA;AADA;AADA;AAMA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AA/EA;AAzBA;;;;;;;;AC1BA;AACA;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRA;AACA;AACA;;;;;ACFA;AACA;AACA;;;;;;;;ACFA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACDA;AACA;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAHA;AAMA;AACA;AAEA;AACA;AACA;AACA;AAzBA;AARA;;ACzBA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiJA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AATA;AAYA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AADA;AAQA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAEA;AAEA;AAAA;AACA;AACA;AACA;AAEA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAOA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAEA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAKA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAMA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAFA;AAIA;AAAA;AACA;AACA;AACA;AAFA;AAKA;AACA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AApIA;AA1DA;;AChLA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACrBA;AACA;AACA;;;;;;;;;ACGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AATA;AADA;;ACLA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AClBA;AACA;AACA;;;;;;;;;ACGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AALA;AADA;;ACLA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClBA;AACA;;;;;;;;ACDA;AACA;;;;;A","sourceRoot":""}