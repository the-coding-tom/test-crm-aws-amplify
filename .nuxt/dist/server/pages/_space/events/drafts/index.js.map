{"version":3,"file":"pages/_space/events/drafts/index.js","sources":["webpack:///./pages/_space/events/drafts/index.vue?df5c","webpack:///./pages/_space/events/drafts/index.vue?386b","webpack:///./pages/_space/events/drafts/index.vue?de16","webpack:///./pages/_space/events/drafts/index.vue","webpack:///./pages/_space/events/drafts/index.vue?f831","webpack:///./pages/_space/events/drafts/index.vue?b13a","webpack:///./components/shack/MainTitle.vue?4b3c","webpack:///MainTitle.vue","webpack:///./components/shack/MainTitle.vue?cbd3","webpack:///./components/shack/MainTitle.vue","webpack:///./components/shack/SectionTitle.vue?33b7","webpack:///SectionTitle.vue","webpack:///./components/shack/SectionTitle.vue?3821","webpack:///./components/shack/SectionTitle.vue"],"sourcesContent":["// Exports\nmodule.exports = {};\n","import mod from \"-!../../../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-0!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-0!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-1!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('base-header',{staticClass:\"pb-6\",attrs:{\"type\":\"\"}},[_c('div',{staticClass:\"d-flex justify-content-between align-items-center py-4\"},[_c('MainTitle',{attrs:{\"title\":\"Events\",\"subtitle\":\"Drafts\"}}),_vm._v(\" \"),_c('nuxt-link',{staticClass:\"btn btn-primary\",staticStyle:{\"visibility\":\"hidden\"},attrs:{\"to\":{ name: 'space-events-add' }}},[_vm._v(\"Add Event\")])],1)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"container-fluid mt--6\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"card-deck flex-column flex-xl-row\\\">\",\"</div>\",[_c('card',[_c('client-only',[_c('full-calendar',{attrs:{\"events\":_vm.events,\"right\":_vm.calendarPlugin},on:{\"eventClick\":_vm.showEvent,\"dateChange\":_vm.dateChange}})],1)],1)],1),_vm._ssrNode(\" \"),_c('b-modal',{attrs:{\"id\":\"eventModal\",\"size\":\"lg\"},scopedSlots:_vm._u([{key:\"modal-title\",fn:function(){return [_c('b-row',[_c('b-col',{attrs:{\"md\":\"12\"}},[_c('h1',[_vm._v(_vm._s(_vm.currentEvent.title))])])],1)]},proxy:true},{key:\"modal-footer\",fn:function(){return [_c('div',{staticClass:\"w-100\"},[(_vm.currentEvent.extendedProps.is_drafted)?[_c('b-button',{staticClass:\"float-left\",attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.updateEvent}},[_vm._v(\"Publish Event\")]),_vm._v(\" \"),_c('b-button',{staticClass:\"text-primary float-left\",attrs:{\"to\":{\n                name: 'space-events-id-edit',\n                params: { id: _vm.currentEvent.id },\n              },\"variant\":\"transparent\"}},[_c('i',{staticClass:\"fa fa-pen\"}),_vm._v(\" Edit Event\")])]:_c('b-button',{staticClass:\"float-left\",attrs:{\"to\":{\n              name: 'space-events-id-edit',\n              params: { id: _vm.currentEvent.id },\n            },\"variant\":\"primary\"}},[_vm._v(\"Edit Event\")]),_vm._v(\" \"),_c('b-button',{staticClass:\"text-primary float-left\",attrs:{\"to\":{ name: 'space-events-id', params: { id: _vm.currentEvent.id } },\"variant\":\"transparent\"}},[_c('i',{staticClass:\"fa fa-eye\"}),_vm._v(\" Preview\")]),_vm._v(\" \"),_c('b-button',{staticClass:\"text-primary float-left\",attrs:{\"to\":{\n              name: 'space-events-id-attendees',\n              params: { id: _vm.currentEvent.id },\n            },\"variant\":\"transparent\"}},[_c('i',{staticClass:\"fa fa-copy\"}),_vm._v(\" View Attendees\")]),_vm._v(\" \"),_c('b-button',{staticClass:\"text-danger float-right\",attrs:{\"variant\":\"transparent\"},on:{\"click\":_vm.deleteEvent}},[_c('i',{staticClass:\"fa fa-times\"}),_vm._v(\" Cancel Event\\n          \")])],2)]},proxy:true}])},[_vm._v(\" \"),_c('b-row',[_c('b-col',{attrs:{\"md\":\"12\"}},[_c('p',{staticClass:\"d-flex align-items-center text-muted\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$moment(_vm.currentEvent.start).format('MMMM DD YYYY'))+\",\\n            \"+_vm._s(_vm.formatTime(_vm.currentEvent.start))+\" -\\n            \"+_vm._s(_vm.formatTime(_vm.currentEvent.end))+\"\\n            \"),_c('i',{staticClass:\"fa fa-circle mx-2\",staticStyle:{\"font-size\":\"5px\"}}),_vm._v(\"\\n            \"+_vm._s(_vm.getRoomDetail(_vm.currentEvent))+\"\\n          \")])])],1),_vm._v(\" \"),_c('span',{domProps:{\"innerHTML\":_vm._s(\n          _vm.currentEvent.extendedProps\n            ? _vm.convertMarkdown(_vm.currentEvent.extendedProps.description)\n            : null\n        )}}),_vm._v(\" \"),_c('b-row',{staticClass:\"mt-2\"},[_c('b-col',{attrs:{\"md\":\"12\"}},[_c('p',[_vm._v(\"\\n            Price:\\n            \"+_vm._s(_vm._f(\"currency\")(_vm.currentEvent.extendedProps &&\n                _vm.currentEvent.extendedProps.price,_vm.space.currency_symbol))+\"\\n          \")])])],1),_vm._v(\" \"),_c('b-row',[_c('b-col',{attrs:{\"md\":\"12\"}},[_c('badge',{attrs:{\"type\":\"info\"}},[_vm._v(_vm._s(_vm.currentEvent.extendedProps &&\n              _vm.currentEvent.extendedProps.event_category.name))])],1)],1)],1)],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// Components\nimport BaseHeader from '@/components/argon-core/BaseHeader'\nimport MainTitle from '@/components/shack/MainTitle.vue'\nimport SectionTitle from '@/components/shack/SectionTitle.vue'\n\nimport { mapState } from 'vuex'\nimport mz from 'moment-timezone'\n\nexport default {\n  layout: 'ShackDash',\n  components: {\n    BaseHeader,\n    MainTitle,\n    SectionTitle\n  },\n  async asyncData({ store, params, $event, error }) {\n    await $event\n      .getEvents()\n      .then(({ data }) => {\n        console.log(data)\n        store.commit('events/setEvents', data.filter(event => event.is_drafted))\n      })\n      .catch(err => {\n        const message = err.response\n          ? JSON.stringify(err.response.data.errros)\n          : err.message\n        error({ statusCode: 404, message: message })\n      })\n  },\n  data() {\n    return {\n      loading: false,\n      calendarPlugin: 'dayGridMonth,timeGridWeek,listWeek',\n      currentEvent: {},\n      modals: {\n        classic: false,\n        notice: false,\n        form: false\n      }\n    }\n  },\n  computed: {\n    ...mapState({\n      events: state =>\n        state.events.calendarEvents.filter(\n          event => event.extendedProps.is_drafted\n        ),\n      space: state => state.space.currentSpace\n    })\n  },\n  methods: {\n    convertMarkdown(text) {\n      var showdown = require('showdown')\n      var converter = new showdown.Converter()\n      var html = converter.makeHtml(text)\n\n      return html\n    },\n    getRoomDetail(event) {\n      if (event.extendedProps) {\n        if (event.extendedProps.room) {\n          return event.extendedProps.room.name\n        } else {\n          return event.extendedProps.external_location\n        }\n      }\n    },\n    formatTime(time) {\n      return mz(time)\n        .tz('Africa/Accra')\n        .format('HH:mm')\n    },\n    showEvent(event) {\n      this.currentEvent = event\n      console.log(event)\n      this.$bvModal.show('eventModal')\n    },\n    dateChange({ startDate, endDate }) {\n      startDate = this.$moment(startDate).format('YYYY-MM-DD')\n      endDate = this.$moment(endDate).format('YYYY-MM-DD')\n\n      this.$event\n        .getEventsByDate(startDate, endDate)\n        .then(({ data: { data } }) => {\n          this.$store.commit('events/setEvents', data)\n        })\n        .catch(({ response }) => {\n          this.$bvToast.toast(JSON.stringify(response.data.errors), {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n        })\n    },\n    deleteEvent() {\n      if (!confirm('Are you sure?')) return\n\n      const eventId = this.currentEvent.id\n      this.$event\n        .deleteEvent(eventId)\n        .then(res => {\n          this.$store.commit('events/removeEvent', eventId)\n          this.$bvModal.hide('eventModal')\n        })\n        .catch(({ response }) => {\n          this.$bvToast.toast(JSON.stringify(response.data.errors), {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n        })\n    },\n    async updateEvent() {\n      this.loading = !this.loading\n\n      let eventUpdate = { ...this.currentEvent.extendedProps }\n      eventUpdate.is_drafted = false\n      eventUpdate.event_category_id = eventUpdate.event_category.id\n\n      await this.$event\n        .updateEvent(eventUpdate.id, {\n          ...eventUpdate\n        })\n        .then(({ data }) => {\n          this.$bvToast.toast(`Event published successfully`, {\n            title: 'Success',\n            variant: 'success',\n            solid: true\n          })\n\n          this.$router.push({\n            name: 'space-events-id',\n            params: { id: eventUpdate.id }\n          })\n        })\n        .catch(({ response }) => {\n          this.loading = !this.loading\n          this.$bvToast.toast(JSON.stringify(response.data.errors), {\n            title: 'Error',\n            variant: 'danger',\n            solid: true\n          })\n        })\n    }\n  }\n}\n","import mod from \"-!../../../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=de02a5e2&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.vue?vue&type=style&index=0&lang=css&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"a3b89d42\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',{staticClass:\"page-title\"},[_vm._ssrNode(\"<span>\"+_vm._ssrEscape(_vm._s(_vm.title))+\"</span> <b\"+(_vm._ssrStyle(null,null, { display: (_vm.subtitle) ? '' : 'none' }))+\">•</b>\"+_vm._ssrEscape(\" \"+_vm._s(_vm.subtitle)))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <h1 class=\"page-title\"><span>{{ title }}</span> <b v-show=\"subtitle\">•</b> {{ subtitle }}</h1>\n</template>\n\n<script>\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    subtitle: {\n      type: String,\n      default: ''\n    },\n    info: {\n      type: String,\n      default: ''\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainTitle.vue?vue&type=template&id=eb42120a&\"\nimport script from \"./MainTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./MainTitle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"2927529c\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h3',{staticClass:\"page-title\"},[_vm._ssrNode(\"<span>\"+_vm._ssrEscape(_vm._s(_vm.title))+\"</span> <b\"+(_vm._ssrStyle(null,null, { display: (_vm.subtitle) ? '' : 'none' }))+\">•</b>\"+_vm._ssrEscape(\" \"+_vm._s(_vm.subtitle)))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <h3 class=\"page-title\"><span>{{ title }}</span> <b v-show=\"subtitle\">•</b> {{ subtitle }}</h3>\n</template>\n\n<script>\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    subtitle: {\n      type: String,\n      default: null\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SectionTitle.vue?vue&type=template&id=b54cd52a&\"\nimport script from \"./SectionTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./SectionTitle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"d20bd3f4\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;AAAA;AACA;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AACA;AAEA;AAGA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAJA;AAUA;AACA;AAAA;AAEA;AAIA;AALA;AADA;AASA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AAEA;AACA;AAGA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAAA;AAAA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AA9FA;AA1CA;;ACxJA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACvBA;AACA;AACA;;;;;;;;;ACGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AATA;AADA;;ACLA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AClBA;AACA;AACA;;;;;;;;;ACGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AALA;AADA;;ACLA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}