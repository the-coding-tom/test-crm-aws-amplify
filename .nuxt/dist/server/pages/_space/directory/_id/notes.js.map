{"version":3,"file":"pages/_space/directory/_id/notes.js","sources":["webpack:///./components/argon-core/Inputs/HtmlEditor.vue?5ae1","webpack:///HtmlEditor.vue","webpack:///./components/argon-core/Inputs/HtmlEditor.vue?ab30","webpack:///./components/argon-core/Inputs/HtmlEditor.vue","webpack:///./pages/_space/directory/_id/notes.vue?2b27","webpack:///notes.vue","webpack:///./pages/_space/directory/_id/notes.vue?68da","webpack:///./pages/_space/directory/_id/notes.vue","webpack:///./components/shack/MainTitle.vue?4b3c","webpack:///MainTitle.vue","webpack:///./components/shack/MainTitle.vue?cbd3","webpack:///./components/shack/MainTitle.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('client-only',[_c('editor',{ref:\"toastuiEditor\",attrs:{\"initial-value\":_vm.editorText,\"options\":_vm.editorOptions,\"initial-edit-type\":\"wysiwyg\",\"preview-style\":\"tab\"},on:{\"change\":_vm.onEditorChange},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <client-only>\n      <!-- <editor\n        v-model=\"text\"\n        :options=\"editorOptions\"\n        :initial-value=\"text\"\n        initial-edit-type=\"wysiwyg\"\n        preview-style=\"none\"\n      /> -->\n      <editor\n        ref=\"toastuiEditor\"\n        :initial-value=\"editorText\"\n        v-model=\"text\"\n        :options=\"editorOptions\"\n        initial-edit-type=\"wysiwyg\"\n        preview-style=\"tab\"\n        @change=\"onEditorChange\"\n      />\n    </client-only>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    value: {\n      type: String,\n      default: ''\n    },\n    editorText: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      editorOptions: {\n        useDefaultHTMLSanitizer: false,\n        usageStatistics: false,\n        hideModeSwitch: true,\n        toolbarItems: [\n          'heading',\n          'bold',\n          'italic',\n          'strike',\n          'divider',\n          'hr',\n          'quote',\n          'divider',\n          'ul',\n          'ol',\n          'task',\n          'indent',\n          'outdent',\n          'divider',\n          //'table',\n          'image',\n          'link',\n          'divider',\n          'code',\n          'codeblock'\n        ]\n      },\n      text: this.value\n    }\n  },\n  watch: {\n    text() {\n      this.$emit('input', this.text)\n    }\n  },\n  methods: {\n    onEditorChange() {\n      let html = this.$refs.toastuiEditor.invoke('getHtml')\n      let desc = this.$refs.toastuiEditor.invoke('getValue')\n      let markdown = this.$refs.toastuiEditor.invoke('getMarkdown')\n\n      this.text = markdown\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HtmlEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HtmlEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HtmlEditor.vue?vue&type=template&id=277b231e&\"\nimport script from \"./HtmlEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./HtmlEditor.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"3c8eb076\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.addNote($event)}}},[_c('base-header',{staticClass:\"pb-6\",attrs:{\"type\":\"\"}},[_c('div',{staticClass:\"d-flex justify-content-between align-items-center py-4\"},[_c('MainTitle',{attrs:{\"title\":\"Directory\",\"subtitle\":\"Notes\"}}),_vm._v(\" \"),_c('b-button',{attrs:{\"disabled\":_vm.loading,\"type\":\"submit\",\"variant\":\"primary\"}},[_vm._v(\"Add Note\")])],1)]),_vm._v(\" \"),_c('b-container',{staticClass:\"col-md-12\"},[_c('b-row',[_c('b-col',{attrs:{\"cols\":\"6\"}},[_c('b-card',{attrs:{\"title\":\"New Note\"}},[_c('html-editor',{attrs:{\"placeholder\":\"Content\"},model:{value:(_vm.body),callback:function ($$v) {_vm.body=$$v},expression:\"body\"}}),_vm._v(\" \"),_c('b-form-checkbox',{staticClass:\"mt-2\",attrs:{\"value\":true,\"unchecked-value\":false},model:{value:(_vm.sticky_note),callback:function ($$v) {_vm.sticky_note=$$v},expression:\"sticky_note\"}},[_vm._v(\"Sticky Note\")])],1)],1),_vm._v(\" \"),_c('b-col',{attrs:{\"cols\":\"6\"}},[_c('b-card',{attrs:{\"title\":\"Administrator Notes\"}},[_c('div',{staticStyle:{\"max-height\":\"500px\",\"overflow-y\":\"auto\",\"margin\":\"0 -25px\"}},[_c('table',{staticClass:\"table table-hover table-striped\"},[_c('tbody',_vm._l((_vm.notes),function(note,i){return _c('tr',{key:note.id},[_c('td',[_c('div',{staticClass:\"d-flex justify-content-between\"},[_c('div',[_c('span',[_vm._v(_vm._s(_vm.$moment(note.updated_at).format('MMM DD, YYYY HH:mm:ss')))]),_vm._v(\" \"),_c('span',[_vm._v(\"~ \"+_vm._s(note.user.name))])]),_vm._v(\" \"),(note.user.id == _vm.user)?_c('div',[_c('b-button',{staticClass:\"text-danger\",attrs:{\"variant\":\"transparent\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.deleteNote(i)}}},[_c('i',{staticClass:\"fa fa-trash\"})])],1):_vm._e()]),_vm._v(\" \"),_c('span',{domProps:{\"innerHTML\":_vm._s(note.body)}})])])}),0)])])])],1)],1)],1)],1),_vm._ssrNode(\" \"),_c('b-button',{staticClass:\"text-primary\",attrs:{\"variant\":\"transparent\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('i',{staticClass:\"fa fa-chevron-left\"}),_vm._v(\" Back\")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <b-form @submit.prevent=\"addNote\">\n      <base-header\n        class=\"pb-6\"\n        type>\n        <div class=\"d-flex justify-content-between align-items-center py-4\">\n          <MainTitle\n            title=\"Directory\"\n            subtitle=\"Notes\" />\n          <b-button\n            :disabled=\"loading\"\n            type=\"submit\"\n            variant=\"primary\">Add Note</b-button>\n        </div>\n      </base-header>\n      <b-container class=\"col-md-12\">\n\n        <b-row>\n\n          <b-col cols=\"6\">\n            <b-card title=\"New Note\">\n              <html-editor\n                v-model=\"body\"\n                placeholder=\"Content\" />\n              <b-form-checkbox\n                v-model=\"sticky_note\"\n                :value=\"true\"\n                :unchecked-value=\"false\"\n                class=\"mt-2\">Sticky Note</b-form-checkbox>\n            </b-card>\n          </b-col>\n          <b-col\n            cols=\"6\"\n          >\n            <b-card\n              title=\"Administrator Notes\"\n            >\n              <div\n                style=\"max-height: 500px; overflow-y:auto; margin: 0 -25px;\">\n                <table class=\"table table-hover table-striped\">\n                  <tbody>\n                    <tr\n                      v-for=\"(note, i) in notes\"\n                      :key=\"note.id\"><td>\n                        <div class=\"d-flex justify-content-between\">\n                          <div>\n                            <span>{{ $moment(note.updated_at).format('MMM DD, YYYY HH:mm:ss') }}</span>\n                            <span>~ {{ note.user.name }}</span>\n                          </div>\n                          <div v-if=\"note.user.id == user\">\n                            <b-button\n                              variant=\"transparent\"\n                              class=\"text-danger\"\n                              size=\"sm\"\n                              @click=\"deleteNote(i)\"><i class=\"fa fa-trash\"/></b-button>\n                          </div>\n                        </div>\n                        <span v-html=\"note.body\"/>\n                    </td></tr>\n                  </tbody>\n                </table>\n              </div>\n            </b-card>\n          </b-col>\n        </b-row>\n      </b-container>\n    </b-form>\n    <b-button\n      variant=\"transparent\"\n      class=\"text-primary\"\n      @click=\"$router.go(-1)\"><i class=\"fa fa-chevron-left\"/> Back</b-button>\n  </div>\n</template>\n\n<script>\nimport BaseHeader from '@/components/argon-core/BaseHeader'\nimport MainTitle from '@/components/shack/MainTitle.vue'\nimport HtmlEditor from '@/components/argon-core/Inputs/HtmlEditor'\nimport { mapState } from 'vuex'\n\nexport default {\n  layout: 'ShackDash',\n  async asyncData({ $membership, params }) {\n    return await $membership\n      .getAllNotes(params.id)\n      .then(({ data }) => {\n        return {\n          notes: data\n        }\n      })\n      .catch(e => {\n        console.log(e.response.data.message)\n      })\n  },\n  components: {\n    BaseHeader,\n    MainTitle,\n    HtmlEditor\n  },\n  data: () => ({\n    loading: false,\n    body: '',\n    sticky_note: false,\n    notes: []\n  }),\n  computed: {\n    ...mapState({\n      user: state => state.auth.user.id\n    })\n  },\n  methods: {\n    addNote() {\n      const { body, sticky_note } = this\n      const { id } = this.$route.params\n\n      this.loading = !this.loading\n\n      this.$membership\n        .addNote(id, { body, sticky_note })\n        .then(({ data }) => {\n          this.body = ''\n          this.loading = !this.loading\n          this.$bvToast.toast('Note added successfully', {\n            title: 'Success',\n            variant: 'success'\n          })\n\n          this.notes.push(data)\n        })\n        .catch(e => {\n          this.loading = !this.loading\n          const message = e.response ? e.response.data.message : e.message\n\n          this.$bvToast.toast(message, {\n            title: 'Error',\n            variant: 'danger'\n          })\n        })\n    },\n    deleteNote(i) {\n      if (!confirm('Are you sure?')) return\n\n      this.loading = !this.loading\n\n      const { id } = this.$route.params\n      const noteId = this.notes[i].id\n\n      this.$membership\n        .deleteNote(id, noteId)\n        .then(res => {\n          this.loading = !this.loading\n\n          this.$bvToast.toast('Note added successfully', {\n            title: 'Success',\n            variant: 'success'\n          })\n\n          this.notes.splice(i, 1)\n        })\n        .catch(e => {\n          this.loading = !this.loading\n          const message = e.response ? e.response.data.message : e.message\n\n          this.$bvToast.toast(message, {\n            title: 'Error',\n            variant: 'danger'\n          })\n        })\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./notes.vue?vue&type=template&id=06286662&\"\nimport script from \"./notes.vue?vue&type=script&lang=js&\"\nexport * from \"./notes.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"2d14aca6\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',{staticClass:\"page-title\"},[_vm._ssrNode(\"<span>\"+_vm._ssrEscape(_vm._s(_vm.title))+\"</span> <b\"+(_vm._ssrStyle(null,null, { display: (_vm.subtitle) ? '' : 'none' }))+\">•</b>\"+_vm._ssrEscape(\" \"+_vm._s(_vm.subtitle)))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <h1 class=\"page-title\"><span>{{ title }}</span> <b v-show=\"subtitle\">•</b> {{ subtitle }}</h1>\n</template>\n\n<script>\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    subtitle: {\n      type: String,\n      default: ''\n    },\n    info: {\n      type: String,\n      default: ''\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@nuxt/webpack/node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainTitle.vue?vue&type=template&id=eb42120a&\"\nimport script from \"./MainTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./MainTitle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"bd5e01f8\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsBA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AALA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AAgBA;AApBA;AA2BA;AA5BA;AA8BA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAKA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AARA;AAhDA;;ACxBA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrBA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0EA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAEA;AADA;AADA;AAKA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAKA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AAEA;AAEA;AAAA;AAAA;AACA;AAEA;AAGA;AAEA;AACA;AACA;AAFA;AAKA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;AA3DA;AA9BA;;ACjFA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACrBA;AACA;AACA;;;;;;;;;ACGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AATA;AADA;;ACLA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}